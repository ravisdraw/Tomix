import{a as Z}from"./chunk-WXO5BKQI.js";import{A as ce,B as ue,C as me,D as pe,E as _e,F as ge,G as Ce,H as xe,a as K,i as J,m as Q,n as X,p as ee,q as h,r as te,s as ie,t as ne,u as re,v as ae,w as de,x as oe,y as le,z as se}from"./chunk-ODYORDEL.js";import{$ as N,Aa as L,B as f,Ba as B,C as U,Ea as D,Ha as S,J as l,M as V,N as R,Oa as Y,R as q,Ra as G,Va as W,W as g,X as C,Y as j,_ as k,aa as v,ba as n,ca as r,da as b,ia as w,ja as _,la as u,qa as z,ra as M,sa as A,t as F,ta as a,u as m,ua as T,v as p,va as x,wa as $,za as O}from"./chunk-5JVNEETK.js";var ve=()=>[1,2,3],fe=()=>({standalone:!0}),H=(o,t)=>t.id;function ye(o,t){o&1&&(n(0,"div",46),b(1,"div",47),r())}function be(o,t){o&1&&(n(0,"div",21),k(1,ye,2,0,"div",46,j),r()),o&2&&(l(),N(D(0,ve)))}function we(o,t){o&1&&(n(0,"div",22),a(1," No credit cards added for this month "),r())}function Se(o,t){if(o&1){let e=w();n(0,"div",69),_("click",function(d){return m(e),p(d.stopPropagation())}),n(1,"i",70),_("click",function(d){m(e);let s=u().$implicit;return u(2).editCard(s),p(d.stopPropagation())}),r(),n(2,"i",71),_("click",function(d){m(e);let s=u().$implicit;return u(2).deleteCard(s.id),p(d.stopPropagation())}),r()()}}function Ee(o,t){if(o&1){let e=w();n(0,"div",49),_("click",function(){let d=m(e).$implicit,s=u(2);return p(s.toggleCardFlip(d.id))}),n(1,"div",50)(2,"div",51)(3,"div",52),b(4,"div",53),n(5,"div",54),a(6,"Credit Card"),r()(),n(7,"div",55),a(8),r(),n(9,"div",56)(10,"div")(11,"div",57),a(12,"Card Holder"),r(),n(13,"div",58),a(14),r()(),n(15,"div")(16,"div",57),a(17,"Due Date"),r(),n(18,"div",58),a(19),r()()(),q(20,Se,3,0,"div",59),r(),n(21,"div",60)(22,"button",61),_("click",function(d){let s=m(e).$implicit;return u(2).toggleCardHistory(s,d),p(d.stopPropagation())}),b(23,"i",62),r(),n(24,"div",63)(25,"div",64)(26,"span",65),a(27,"Credit Limit:"),r(),n(28,"span",66),a(29),r()(),n(30,"div",64)(31,"span",65),a(32,"Utilized:"),r(),n(33,"span",66),a(34),r()(),n(35,"div",64)(36,"span",65),a(37,"Available:"),r(),n(38,"span",67),a(39),r()(),n(40,"div",64)(41,"span",65),a(42,"Due Amount:"),r(),n(43,"span",68),a(44),r()(),n(45,"div",64)(46,"span",65),a(47,"Billing Cycle:"),r(),n(48,"span",66),a(49),r()()()()()()}if(o&2){let e=t.$implicit,i=t.$index,d=u(2);l(),M("flipped",d.isCardFlipped(e.id)),l(),z("background",d.getCardGradient(i)),l(6),x(" ",d.getMaskedCardNumber(e.last_four_digits)," "),l(6),T(e.card_name),l(5),T(e.due_date),l(),v("ngIf",d.selectedCardId()===e.id),l(),z("background",d.getCardGradient(i)),l(8),x("\u20B9 ",d.formatIndianRupee(e.card_limit)),l(5),x("\u20B9 ",d.formatIndianRupee(e.utilized_amount)),l(5),x("\u20B9 ",d.formatIndianRupee(e.card_limit-e.utilized_amount)),l(5),x("\u20B9 ",d.formatIndianRupee(e.due_amount)),l(5),x("",e.billing_cycle_day,"th of month")}}function Me(o,t){if(o&1&&(n(0,"div",21),k(1,Ee,50,15,"div",48,H),r()),o&2){let e=u();l(),N(e.currentMonthCards())}}function Ie(o,t){o&1&&(n(0,"div",76),a(1," Loading history... "),r())}function Ae(o,t){o&1&&(n(0,"div",76),a(1," No history found for this card "),r())}function Fe(o,t){if(o&1&&(n(0,"tr",84)(1,"td",85),a(2),r(),n(3,"td",86),a(4),r(),n(5,"td",87),a(6),r(),n(7,"td",88),a(8),r(),n(9,"td",89),a(10),r(),n(11,"td",90),a(12),r(),n(13,"td",91)(14,"span"),a(15),r()()()),o&2){let e=t.$implicit,i=u(3);l(2),T(e.month_year),l(2),x("\u20B9 ",i.formatIndianRupee(e.card_limit)),l(2),x("\u20B9 ",i.formatIndianRupee(e.utilized_amount)),l(2),x("\u20B9 ",i.formatIndianRupee(e.card_limit-e.utilized_amount)),l(2),x("\u20B9 ",i.formatIndianRupee(e.due_amount)),l(2),T(e.due_date),l(2),A(e.utilized_amount/e.card_limit>.7?"text-red-600 font-semibold":"text-gray-700"),l(),x(" ",(e.utilized_amount/e.card_limit*100).toFixed(1),"% ")}}function ke(o,t){if(o&1&&(n(0,"div",77)(1,"table",78)(2,"thead",79)(3,"tr")(4,"th",80),a(5,"Month/Year"),r(),n(6,"th",81),a(7,"Credit Limit"),r(),n(8,"th",81),a(9,"Utilized Amount"),r(),n(10,"th",81),a(11,"Available"),r(),n(12,"th",81),a(13,"Due Amount"),r(),n(14,"th",82),a(15,"Due Date"),r(),n(16,"th",82),a(17,"Utilization %"),r()()(),n(18,"tbody",83),k(19,Fe,16,9,"tr",84,H),r()()()),o&2){let e=u(2);l(19),N(e.cardHistory())}}function Ne(o,t){if(o&1){let e=w();n(0,"div",23)(1,"div",72)(2,"h3",73),a(3,"Card Usage History"),r(),n(4,"button",74),_("click",function(){m(e);let d=u();return d.showHistoryForCard.set(null),p(d.cardHistory.set([]))}),b(5,"i",75),r()(),g(6,Ie,2,0,"div",76)(7,Ae,2,0,"div",76)(8,ke,21,0,"div",77),r()}if(o&2){let e=u();l(6),C(e.isLoadingHistory()?6:e.cardHistory().length===0?7:8)}}function Te(o,t){if(o&1){let e=w();n(0,"div",29)(1,"label",92)(2,"input",93),B("ngModelChange",function(d){m(e);let s=u();return L(s.isAddingNew,d)||(s.isAddingNew=d),p(d)}),_("change",function(){m(e);let d=u();return p(d.onCardTypeChange())}),r(),n(3,"span",30),a(4,"Add New Card"),r()(),n(5,"label",92)(6,"input",93),B("ngModelChange",function(d){m(e);let s=u();return L(s.isAddingNew,d)||(s.isAddingNew=d),p(d)}),_("change",function(){m(e);let d=u();return p(d.onCardTypeChange())}),r(),n(7,"span",30),a(8,"Select Existing"),r()()()}if(o&2){let e=u();l(2),v("value",!0),O("ngModel",e.isAddingNew),v("ngModelOptions",D(6,fe)),l(4),v("value",!1),O("ngModel",e.isAddingNew),v("ngModelOptions",D(7,fe))}}function Pe(o,t){if(o&1&&(n(0,"option",96),a(1),r()),o&2){let e=t.$implicit;v("value",e.id),l(),$("",e.card_name," - \u2022\u2022\u2022\u2022 ",e.last_four_digits)}}function Ve(o,t){o&1&&(n(0,"p",99),a(1," This will create a new entry for the current month with this card's details. "),r())}function De(o,t){o&1&&(n(0,"p",100),a(1," \u26A0\uFE0F This will update the card template. Changes will not affect existing monthly entries. "),r())}function ze(o,t){o&1&&(n(0,"p",101),a(1," \u26A0\uFE0F This will permanently delete the card template. "),r())}function Oe(o,t){if(o&1){let e=w();n(0,"div")(1,"label",30),a(2,"What would you like to do?"),r(),n(3,"div",97)(4,"button",98),_("click",function(){m(e);let d=u(2);return p(d.cardAction.set(""))}),a(5," Add for This Month "),r(),n(6,"button",98),_("click",function(){m(e);let d=u(2);return p(d.onCardActionChange("edit"))}),a(7," Edit Card "),r(),n(8,"button",98),_("click",function(){m(e);let d=u(2);return p(d.onCardActionChange("delete"))}),a(9," Delete Card "),r()(),g(10,Ve,2,0,"p",99)(11,De,2,0,"p",100)(12,ze,2,0,"p",101),r()}if(o&2){let e=u(2);l(4),A(e.cardAction()===""?"bg-blue-500 text-white":"bg-gray-200 text-gray-700"),l(2),A(e.cardAction()==="edit"?"bg-orange-500 text-white":"bg-gray-200 text-gray-700"),l(2),A(e.cardAction()==="delete"?"bg-red-500 text-white":"bg-gray-200 text-gray-700"),l(2),C(e.cardAction()===""?10:e.cardAction()==="edit"?11:e.cardAction()==="delete"?12:-1)}}function Le(o,t){if(o&1){let e=w();n(0,"div")(1,"label",30),a(2,"Select Existing Card"),r(),n(3,"select",94),_("change",function(d){m(e);let s=u();return p(s.onExistingCardSelect(d))}),n(4,"option",95),a(5,"Select a card"),r(),k(6,Pe,2,3,"option",96,H),r()(),g(8,Oe,13,7,"div")}if(o&2){let e=u();l(6),N(e.existingCards()),l(2),C(e.selectedExistingCard()&&!e.editingCardId()?8:-1)}}function Be(o,t){o&1&&(n(0,"p",33),a(1,"Card name is required"),r())}function He(o,t){o&1&&(n(0,"p",33),a(1,"Enter 4 digits"),r())}function Ue(o,t){o&1&&(n(0,"p",33),a(1,"Credit limit is required"),r())}function Re(o,t){o&1&&(n(0,"p",33),a(1,"Utilized amount is required"),r())}function qe(o,t){o&1&&(n(0,"p",39),a(1,"\u2713 You can update this for the current month"),r())}function je(o,t){o&1&&(n(0,"p",33),a(1,"Enter a day between 1-31"),r())}function $e(o,t){o&1&&(n(0,"p",33),a(1,"Due date is required"),r())}function Ye(o,t){o&1&&(n(0,"p",39),a(1,"\u2713 You can update this for the current month"),r())}function Ge(o,t){o&1&&(n(0,"p",33),a(1,"Due amount is required"),r())}function We(o,t){o&1&&(n(0,"p",39),a(1,"\u2713 You can update this for the current month"),r())}function Ke(o,t){o&1&&a(0," Delete Card ")}function Je(o,t){o&1&&a(0," Update Card ")}function Qe(o,t){o&1&&a(0," Update Entry ")}function Xe(o,t){o&1&&a(0," Add Card ")}var he=class o{constructor(t,e,i){this.fb=t;this.authService=e;this.router=i;this.authService.session$.subscribe(d=>{d||this.router.navigate(["/login"])}),this.creditCardForm=this.fb.group({card_name:["",h.required],last_four_digits:["",[h.required,h.pattern(/^\d{4}$/)]],card_limit:[0,[h.required,h.min(0)]],utilized_amount:[0,[h.required,h.min(0)]],billing_cycle_day:[1,[h.required,h.min(1),h.max(31)]],due_date:["",h.required],due_amount:[0,[h.required,h.min(0)]],existing_card_id:[""]}),U(()=>{let d=this.monthStore.month(),s=this.previousMonth(),c=this.userId();if(c){if(!s){this.previousMonth.set(d),c&&this.loadCreditCards(c);return}d!==s&&(this.previousMonth.set(d),c&&this.loadCreditCards(c))}})}showAddCard=f(!1);creditCardForm;editingCardId=f(null);selectedCardId=f(null);isCheckingData=f(!0);userId=f(null);creditCards=f([]);flippedCards=f(new Set);previousMonth=f("");existingCards=f([]);isAddingNew=f(!0);selectedExistingCard=f(null);cardAction=f("");showHistoryForCard=f(null);cardHistory=f([]);isLoadingHistory=f(!1);monthStore=F(Z);supabaseService=F(K);creditCardsService=F(J);appDataStore=F(Q);currentMonthKey=S(()=>this.monthStore.month().split(" ").join(""));currentMonthCards=S(()=>{let t=this.creditCards(),e=new Map;return t.forEach(i=>{let d=`${i.card_name}-${i.last_four_digits}`,s=e.get(d);(!s||new Date(i.created_at||"")>new Date(s.created_at||""))&&e.set(d,i)}),Array.from(e.values())});totalLimit=S(()=>this.currentMonthCards().reduce((t,e)=>t+(e.card_limit||0),0));totalUtilized=S(()=>this.currentMonthCards().reduce((t,e)=>t+(e.utilized_amount||0),0));totalDue=S(()=>this.currentMonthCards().reduce((t,e)=>t+(e.due_amount||0),0));availableCredit=S(()=>this.totalLimit()-this.totalUtilized());utilizationPercentage=S(()=>{let t=this.totalLimit();return t===0?0:Math.round(this.totalUtilized()/t*100)});async ngOnInit(){try{let t=await this.supabaseService.getCurrentUser();t&&await this.loadCreditCards(t.id)}catch(t){console.error("Failed to get user:",t);let e=this.getOrCreateDemoUserId();this.userId.set(e),await this.loadCreditCards(e)}}getOrCreateDemoUserId(){let t="demo-user-id",e=localStorage.getItem(t);return e||(e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){let d=Math.random()*16|0;return(i==="x"?d:d&3|8).toString(16)}),localStorage.setItem(t,e)),e}async loadCreditCards(t){this.isCheckingData.set(!0);try{let e=[];this.appDataStore.creditCardsLoaded()&&this.appDataStore.currentUserId()===t?(e=this.appDataStore.creditCards(),this.creditCards.set(e),console.log("Using cached credit cards data")):(await this.appDataStore.loadCreditCards(t),e=this.appDataStore.creditCards(),this.creditCards.set(e));let i=this.getUniqueCards(e);this.existingCards.set(i)}catch(e){console.error("Error loading credit cards:",e)}finally{this.isCheckingData.set(!1)}}getUniqueCards(t){let e=new Map;return t.forEach(i=>{let d=`${i.card_name}-${i.last_four_digits}`;e.has(d)||e.set(d,i)}),Array.from(e.values())}openAddCard(){this.resetForm(),this.isAddingNew.set(!0),this.showAddCard.set(!0)}closeAddCard(){this.showAddCard.set(!1),this.selectedCardId.set(null),this.resetForm()}toggleCardSelection(t){this.selectedCardId()===t?this.selectedCardId.set(null):this.selectedCardId.set(t)}toggleCardFlip(t){let e=this.flippedCards();e.has(t)?e.delete(t):e.add(t),this.flippedCards.set(new Set(e))}isCardFlipped(t){return this.flippedCards().has(t)}async toggleCardHistory(t,e){if(e.stopPropagation(),this.showHistoryForCard()===t.id){this.showHistoryForCard.set(null),this.cardHistory.set([]);return}this.showHistoryForCard.set(t.id),this.isLoadingHistory.set(!0);try{let i=this.userId();if(!i)return;let s=(await this.creditCardsService.getCreditCards(i)).filter(c=>c.card_name===t.card_name&&c.last_four_digits===t.last_four_digits).sort((c,y)=>new Date(y.created_at||"").getTime()-new Date(c.created_at||"").getTime());this.cardHistory.set(s)}catch(i){console.error("Error loading card history:",i)}finally{this.isLoadingHistory.set(!1)}}onCardTypeChange(){this.isAddingNew()?this.creditCardForm.patchValue({existing_card_id:""}):this.creditCardForm.patchValue({card_name:"",last_four_digits:"",card_limit:0,utilized_amount:0,billing_cycle_day:1,due_date:"",due_amount:0})}onExistingCardSelect(t){let e=t.target.value;if(!e){this.selectedExistingCard.set(null),this.cardAction.set("");return}let i=this.existingCards().find(d=>d.id===e);i&&(this.selectedExistingCard.set(i),this.cardAction.set(""),this.creditCardForm.patchValue({card_name:i.card_name,last_four_digits:i.last_four_digits,card_limit:i.card_limit.toLocaleString("en-IN"),utilized_amount:0,billing_cycle_day:i.billing_cycle_day,due_date:"",due_amount:0}))}onCardActionChange(t){this.cardAction.set(t);let e=this.selectedExistingCard();e&&t==="edit"&&this.creditCardForm.patchValue({card_name:e.card_name,last_four_digits:e.last_four_digits,card_limit:e.card_limit.toLocaleString("en-IN"),utilized_amount:e.utilized_amount.toLocaleString("en-IN"),billing_cycle_day:e.billing_cycle_day,due_date:e.due_date,due_amount:e.due_amount.toLocaleString("en-IN")})}async executeCardAction(){let t=this.cardAction(),e=this.selectedExistingCard();!e||!t||(t==="delete"?await this.deleteCardTemplate(e.id):t==="edit"&&await this.updateCardTemplate())}async deleteCardTemplate(t){if(confirm("This will delete the card template. Are you sure?"))try{let e=this.userId();await this.creditCardsService.deleteCreditCard(t),e&&await this.loadCreditCards(e),this.resetForm(),this.selectedExistingCard.set(null),this.cardAction.set(""),alert("Card template deleted successfully")}catch(e){console.error("Error deleting card template:",e),alert("Failed to delete card template.")}}async updateCardTemplate(){if(this.creditCardForm.invalid)return;let t=this.creditCardForm.value,e=this.selectedExistingCard();if(!e)return;let i=typeof t.card_limit=="string"?parseInt(t.card_limit.replace(/,/g,""),10)||0:t.card_limit,d=typeof t.utilized_amount=="string"?parseInt(t.utilized_amount.replace(/,/g,""),10)||0:t.utilized_amount,s=typeof t.due_amount=="string"?parseInt(t.due_amount.replace(/,/g,""),10)||0:t.due_amount;try{let c=this.userId();await this.creditCardsService.updateCreditCard(e.id,{card_name:t.card_name,last_four_digits:t.last_four_digits,card_limit:i,utilized_amount:d,billing_cycle_day:t.billing_cycle_day,due_date:t.due_date,due_amount:s}),c&&await this.loadCreditCards(c),this.resetForm(),this.selectedExistingCard.set(null),this.cardAction.set(""),this.closeAddCard(),alert("Card template updated successfully")}catch(c){console.error("Error updating card template:",c),alert("Failed to update card template.")}}onAmountChange(t,e){let d=t.target.value.replace(/[^\d]/g,"");if(d===""){t.target.value="",this.creditCardForm.get(e)?.setValue("",{emitEvent:!1});return}let s=parseInt(d,10);if(!isNaN(s)){let c=s.toLocaleString("en-IN");t.target.value=c,this.creditCardForm.get(e)?.setValue(c,{emitEvent:!1})}}async submitCreditCard(){if(this.cardAction()){await this.executeCardAction();return}if(this.creditCardForm.invalid)return;let e=this.creditCardForm.value,i=this.monthStore.month(),d=this.userId();if(!d){console.error("User not authenticated");return}let s=typeof e.card_limit=="string"?parseInt(e.card_limit.replace(/,/g,""),10)||0:e.card_limit,c=typeof e.utilized_amount=="string"?parseInt(e.utilized_amount.replace(/,/g,""),10)||0:e.utilized_amount,y=typeof e.due_amount=="string"?parseInt(e.due_amount.replace(/,/g,""),10)||0:e.due_amount,E=this.editingCardId();try{E?await this.creditCardsService.updateCreditCard(E,{card_name:e.card_name,last_four_digits:e.last_four_digits,card_limit:s,utilized_amount:c,billing_cycle_day:e.billing_cycle_day,due_date:e.due_date,due_amount:y,month_year:i}):await this.creditCardsService.createCreditCard({user_id:d,card_name:e.card_name,last_four_digits:e.last_four_digits,card_limit:s,utilized_amount:c,billing_cycle_day:e.billing_cycle_day,due_date:e.due_date,due_amount:y,month_year:i}),d&&await this.loadCreditCards(d),this.resetForm(),this.closeAddCard()}catch(I){console.error("Error saving credit card:",I),alert("Failed to save credit card. Please try again.")}}async deleteCard(t){if(confirm("Are you sure you want to delete this credit card?"))try{let e=this.userId();await this.creditCardsService.deleteCreditCard(t),e&&await this.loadCreditCards(e)}catch(e){console.error("Error deleting credit card:",e),alert("Failed to delete credit card. Please try again.")}}editCard(t){this.editingCardId.set(t.id||null),this.isAddingNew.set(!0),this.creditCardForm.patchValue({card_name:t.card_name,last_four_digits:t.last_four_digits,card_limit:t.card_limit.toLocaleString("en-IN"),utilized_amount:t.utilized_amount.toLocaleString("en-IN"),billing_cycle_day:t.billing_cycle_day,due_date:t.due_date,due_amount:t.due_amount.toLocaleString("en-IN")}),this.showAddCard.set(!0)}resetForm(){this.editingCardId.set(null),this.selectedExistingCard.set(null),this.cardAction.set(""),this.creditCardForm.reset({card_name:"",last_four_digits:"",card_limit:0,utilized_amount:0,billing_cycle_day:1,due_date:"",due_amount:0,existing_card_id:""})}formatIndianRupee(t){return t?t.toLocaleString("en-IN"):"0"}getMaskedCardNumber(t){return`\u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022 ${t}`}getCardGradient(t){let e=["linear-gradient(135deg, #667eea 0%, #764ba2 100%)","linear-gradient(135deg, #f093fb 0%, #f5576c 100%)","linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)","linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)","linear-gradient(135deg, #fa709a 0%, #fee140 100%)","linear-gradient(135deg, #30cfd0 0%, #330867 100%)"];return e[t%e.length]}static \u0275fac=function(e){return new(e||o)(V(ge),V(X),V(W))};static \u0275cmp=R({type:o,selectors:[["app-credit-cards"]],decls:119,vars:39,consts:[["limitInput",""],["utilizedInput",""],["dueInput",""],[1,"w-full","h-full","flex","flex-col","2xl:px-8","md:px-5"],[1,"w-full","2xl:h-[15%]","flex","place-items-center","justify-between"],[1,"font-medium","2xl:text-[25px]","text-[22px]"],[1,"flex","gap-3","justify-center","place-items-center"],[1,"p-3","justify-center","place-items-center"],[1,"bx","bx-plus","rounded-[10px]","bg-[#08B783]","p-3","2xl:text-[20px]","text-[16px]","font-bold",2,"color","#ffffff",3,"click"],[1,"w-full","h-[85%]","flex","pb-5","2xl:gap-5","gap-2","flex-col"],[1,"w-full","grid-cols-1","md:grid-cols-4","gap-4","hidden"],[1,"rounded-[10px]","bg-[#F7FCFC]","p-5","flex","flex-col","gap-2"],[1,"text-[12px]","text-gray-500","font-medium"],[1,"font-semibold","2xl:text-[22px]","text-[18px]","text-blue-600"],[1,"font-semibold","2xl:text-[22px]","text-[18px]","text-orange-600"],[1,"font-semibold","2xl:text-[22px]","text-[18px]","text-green-600"],[1,"font-semibold","2xl:text-[22px]","text-[18px]","text-red-600"],[1,"w-full","flex-1","rounded-[10px]","bg-[#F7FCFC]","p-5","overflow-hidden"],[1,"w-full","h-full","flex","flex-col"],[1,"font-medium","2xl:text-[20px]","text-[16px]","mb-4","shrink-0"],[1,"flex-1","overflow-y-auto","min-h-0"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],[1,"w-full","flex","items-center","justify-center","text-gray-400","h-full"],[1,"mt-6","border-t","pt-6"],[1,"fixed","top-0","right-0","z-50","h-full","2xl:max-w-md","w-sm","bg-white","transform","transition-transform","duration-300","ease-in-out","flex","flex-col","translate-x-full"],[1,"flex","items-center","justify-between","p-4","border-b"],[1,"2xl:text-lg","font-semibold"],[1,"text-2xl","text-gray-500",3,"click"],[1,"flex","flex-col","2xl:gap-4","gap-2","p-4","overflow-y-auto","flex-1","2xl:text-[15px]","text-[12px]",3,"ngSubmit","formGroup"],[1,"flex","gap-4","mb-4"],[1,"text-sm","font-medium"],[1,"text-red-500"],["type","text","formControlName","card_name","placeholder","e.g., HDFC Regalia, SBI SimplyCLICK",1,"mt-1","w-full","rounded-lg","border","px-3","py-2","outline-none",3,"readonly"],[1,"text-red-500","text-xs","mt-1"],["type","text","formControlName","last_four_digits","maxlength","4","placeholder","1234",1,"mt-1","w-full","rounded-lg","border","px-3","py-2","outline-none",3,"readonly"],[1,"relative"],[1,"absolute","left-3","top-3","text-gray-500"],["type","text","formControlName","card_limit","placeholder","0",1,"mt-1","w-full","rounded-lg","border","px-10","py-2","outline-none",3,"input","readonly"],["type","text","formControlName","utilized_amount","placeholder","0",1,"mt-1","w-full","rounded-lg","border","px-10","py-2","outline-none",3,"input"],[1,"text-xs","text-blue-600","mt-1"],["type","number","formControlName","billing_cycle_day","min","1","max","31","placeholder","1",1,"mt-1","w-full","rounded-lg","border","px-3","py-2","outline-none",3,"readonly"],["type","date","formControlName","due_date",1,"mt-1","w-full","rounded-lg","border","px-3","py-2","outline-none"],["type","text","formControlName","due_amount","placeholder","0",1,"mt-1","w-full","rounded-lg","border","px-10","py-2","outline-none",3,"input"],[1,"mt-auto","flex","gap-3","pt-4"],["type","button",1,"flex-1","rounded-lg","bg-gray-200","py-2",3,"click"],["type","submit",1,"flex-1","rounded-lg","text-white","py-2"],[1,"skeleton-card"],[1,"skeleton","skeleton-card-content"],[1,"card-container"],[1,"card-container",3,"click"],[1,"credit-card"],[1,"card-face","card-front"],[1,"card-header"],[1,"card-chip"],[1,"card-type"],[1,"card-number"],[1,"card-info"],[1,"card-label"],[1,"card-value"],["class","card-actions",3,"click",4,"ngIf"],[1,"card-face","card-back"],["type","button","title","View card history","aria-label","View card history",1,"absolute","bottom-3","right-4","bg-white/20","backdrop-blur-md","hover:bg-white/30","rounded-full","p-1","transition-all","z-10","cursor-pointer",3,"click"],[1,"bx","bx-info-circle","text-white","text-xl"],[1,"card-details"],[1,"detail-row"],[1,"detail-label"],[1,"detail-value"],[1,"detail-value","text-green-300"],[1,"detail-value","text-red-300"],[1,"card-actions",3,"click"],[1,"bx","bx-edit-alt",3,"click"],[1,"bx","bx-trash-alt",3,"click"],[1,"flex","items-center","justify-between","mb-4"],[1,"font-medium","2xl:text-[18px]","text-[16px]"],["type","button",1,"text-gray-500","hover:text-gray-700",3,"click"],[1,"bx","bx-x","text-2xl"],[1,"text-center","text-gray-400","py-8"],[1,"overflow-x-auto"],[1,"w-full"],[1,"bg-gray-100"],[1,"px-4","py-3","text-left","text-sm","font-medium","text-gray-700"],[1,"px-4","py-3","text-right","text-sm","font-medium","text-gray-700"],[1,"px-4","py-3","text-center","text-sm","font-medium","text-gray-700"],[1,"divide-y","divide-gray-200"],[1,"hover:bg-gray-50"],[1,"px-4","py-3","text-sm","font-medium","text-gray-900"],[1,"px-4","py-3","text-sm","text-right","text-gray-700"],[1,"px-4","py-3","text-sm","text-right","font-medium","text-orange-600"],[1,"px-4","py-3","text-sm","text-right","font-medium","text-green-600"],[1,"px-4","py-3","text-sm","text-right","font-medium","text-red-600"],[1,"px-4","py-3","text-sm","text-center","text-gray-700"],[1,"px-4","py-3","text-sm","text-center"],[1,"flex","items-center","gap-2","cursor-pointer"],["type","radio",1,"cursor-pointer",3,"ngModelChange","change","value","ngModel","ngModelOptions"],["formControlName","existing_card_id",1,"mt-1","w-full","rounded-lg","border","px-3","py-2","outline-none","text-gray-900",3,"change"],["value",""],[3,"value"],[1,"flex","gap-3","mt-2"],["type","button",1,"flex-1","py-2","px-4","rounded-lg","font-medium","transition-colors",3,"click"],[1,"text-xs","text-gray-500","mt-2"],[1,"text-xs","text-orange-600","mt-2"],[1,"text-xs","text-red-600","mt-2"]],template:function(e,i){if(e&1){let d=w();n(0,"div",3)(1,"div",4)(2,"div",5),a(3,"Credit Cards"),r(),n(4,"div",6)(5,"div",7)(6,"i",8),_("click",function(){return m(d),p(i.openAddCard())}),r()()()(),n(7,"div",9)(8,"div",10)(9,"div",11)(10,"div",12),a(11,"Total Credit Limit"),r(),n(12,"div",13),a(13),r()(),n(14,"div",11)(15,"div",12),a(16,"Total Utilized"),r(),n(17,"div",14),a(18),r()(),n(19,"div",11)(20,"div",12),a(21,"Available Credit"),r(),n(22,"div",15),a(23),r()(),n(24,"div",11)(25,"div",12),a(26,"Total Due Amount"),r(),n(27,"div",16),a(28),r()()(),n(29,"div",17)(30,"div",18)(31,"div",19),a(32,"Your Credit Cards"),r(),n(33,"div",20),g(34,be,3,1,"div",21)(35,we,2,0,"div",22)(36,Me,3,0,"div",21),r(),g(37,Ne,9,1,"div",23),r()()(),n(38,"div",24)(39,"div",25)(40,"h2",26),a(41),r(),n(42,"button",27),_("click",function(){return m(d),p(i.closeAddCard())}),a(43,"\u2715"),r()(),n(44,"form",28),_("ngSubmit",function(){return m(d),p(i.submitCreditCard())}),g(45,Te,9,8,"div",29),g(46,Le,9,1),n(47,"div")(48,"label",30),a(49,"Card Name / Bank Name "),n(50,"span",31),a(51,"*"),r()(),b(52,"input",32),g(53,Be,2,0,"p",33),r(),n(54,"div")(55,"label",30),a(56,"Last 4 Digits "),n(57,"span",31),a(58,"*"),r()(),b(59,"input",34),g(60,He,2,0,"p",33),r(),n(61,"div")(62,"label",30),a(63,"Credit Limit "),n(64,"span",31),a(65,"*"),r()(),n(66,"div",35)(67,"span",36),a(68,"\u20B9"),r(),n(69,"input",37,0),_("input",function(c){return m(d),p(i.onAmountChange(c,"card_limit"))}),r()(),g(71,Ue,2,0,"p",33),r(),n(72,"div")(73,"label",30),a(74,"Utilized Amount "),n(75,"span",31),a(76,"*"),r()(),n(77,"div",35)(78,"span",36),a(79,"\u20B9"),r(),n(80,"input",38,1),_("input",function(c){return m(d),p(i.onAmountChange(c,"utilized_amount"))}),r()(),g(82,Re,2,0,"p",33),g(83,qe,2,0,"p",39),r(),n(84,"div")(85,"label",30),a(86,"Billing Cycle Day "),n(87,"span",31),a(88,"*"),r()(),b(89,"input",40),g(90,je,2,0,"p",33),r(),n(91,"div")(92,"label",30),a(93,"Payment Due Date "),n(94,"span",31),a(95,"*"),r()(),b(96,"input",41),g(97,$e,2,0,"p",33),g(98,Ye,2,0,"p",39),r(),n(99,"div")(100,"label",30),a(101,"Due Amount "),n(102,"span",31),a(103,"*"),r()(),n(104,"div",35)(105,"span",36),a(106,"\u20B9"),r(),n(107,"input",42,2),_("input",function(c){return m(d),p(i.onAmountChange(c,"due_amount"))}),r()(),g(109,Ge,2,0,"p",33),g(110,We,2,0,"p",39),r(),n(111,"div",43)(112,"button",44),_("click",function(){return m(d),p(i.closeAddCard())}),a(113," Cancel "),r(),n(114,"button",45),g(115,Ke,1,0)(116,Je,1,0)(117,Qe,1,0)(118,Xe,1,0),r()()()()()}if(e&2){let d,s,c,y,E,I,P;l(13),x(" \u20B9 ",i.formatIndianRupee(i.totalLimit())," "),l(5),x(" \u20B9 ",i.formatIndianRupee(i.totalUtilized())," "),l(5),x(" \u20B9 ",i.formatIndianRupee(i.availableCredit())," "),l(5),x(" \u20B9 ",i.formatIndianRupee(i.totalDue())," "),l(6),C(i.isCheckingData()?34:i.currentMonthCards().length===0?35:36),l(3),C(i.showHistoryForCard()?37:-1),l(),M("translate-x-0",i.showAddCard())("translate-x-full",!i.showAddCard()),l(3),x(" ",i.editingCardId()?"Edit Credit Card":"Add Credit Card"," "),l(3),v("formGroup",i.creditCardForm),l(),C(i.editingCardId()?-1:45),l(),C(!i.isAddingNew()&&!i.editingCardId()?46:-1),l(6),M("bg-gray-100",i.selectedExistingCard()&&i.cardAction()===""),v("readonly",i.selectedExistingCard()&&i.cardAction()===""),l(),C((d=i.creditCardForm.get("card_name"))!=null&&d.invalid&&((d=i.creditCardForm.get("card_name"))!=null&&d.touched)?53:-1),l(6),M("bg-gray-100",i.selectedExistingCard()&&i.cardAction()===""),v("readonly",i.selectedExistingCard()&&i.cardAction()===""),l(),C((s=i.creditCardForm.get("last_four_digits"))!=null&&s.invalid&&((s=i.creditCardForm.get("last_four_digits"))!=null&&s.touched)?60:-1),l(9),M("bg-gray-100",i.selectedExistingCard()&&i.cardAction()===""),v("readonly",i.selectedExistingCard()&&i.cardAction()===""),l(2),C((c=i.creditCardForm.get("card_limit"))!=null&&c.invalid&&((c=i.creditCardForm.get("card_limit"))!=null&&c.touched)?71:-1),l(11),C((y=i.creditCardForm.get("utilized_amount"))!=null&&y.invalid&&((y=i.creditCardForm.get("utilized_amount"))!=null&&y.touched)?82:-1),l(),C(i.selectedExistingCard()&&i.cardAction()===""?83:-1),l(6),M("bg-gray-100",i.selectedExistingCard()&&i.cardAction()===""),v("readonly",i.selectedExistingCard()&&i.cardAction()===""),l(),C((E=i.creditCardForm.get("billing_cycle_day"))!=null&&E.invalid&&((E=i.creditCardForm.get("billing_cycle_day"))!=null&&E.touched)?90:-1),l(7),C((I=i.creditCardForm.get("due_date"))!=null&&I.invalid&&((I=i.creditCardForm.get("due_date"))!=null&&I.touched)?97:-1),l(),C(i.selectedExistingCard()&&i.cardAction()===""?98:-1),l(11),C((P=i.creditCardForm.get("due_amount"))!=null&&P.invalid&&((P=i.creditCardForm.get("due_amount"))!=null&&P.touched)?109:-1),l(),C(i.selectedExistingCard()&&i.cardAction()===""?110:-1),l(4),A(i.cardAction()==="delete"?"bg-red-500":"bg-emerald-500"),l(),C(i.cardAction()==="delete"?115:i.cardAction()==="edit"?116:i.editingCardId()?117:118)}},dependencies:[xe,re,ce,ue,ee,ae,se,de,te,ie,_e,pe,me,le,oe,Ce,ne,G,Y],styles:['form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{border:1px solid lightgray}form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%] > option[_ngcontent-%COMP%]{color:#000}.skeleton[_ngcontent-%COMP%]{background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0,#f0f0f0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_loading 1.5s infinite}@keyframes _ngcontent-%COMP%_loading{0%{background-position:200% 0}to{background-position:-200% 0}}.skeleton-card[_ngcontent-%COMP%]{height:240px;border-radius:16px;overflow:hidden}.skeleton-card-content[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:16px}.card-container[_ngcontent-%COMP%]{perspective:1000px;height:230px;width:380px;cursor:pointer}.credit-card[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;transition:transform .6s;transform-style:preserve-3d}.credit-card.flipped[_ngcontent-%COMP%]{transform:rotateY(180deg)}.card-face[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;backface-visibility:hidden;border-radius:16px;padding:24px;color:#fff;box-shadow:0 10px 30px #0003}.card-front[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between}.card-back[_ngcontent-%COMP%]{transform:rotateY(180deg);display:flex;flex-direction:column;gap:16px}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start}.card-chip[_ngcontent-%COMP%]{width:45px;height:35px;background:linear-gradient(135deg,gold,#ffed4e,gold);border-radius:6px;position:relative}.card-chip[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:35px;height:25px;border:1px solid rgba(0,0,0,.2);border-radius:4px}.card-type[_ngcontent-%COMP%]{font-size:12px;font-weight:600;text-transform:uppercase;letter-spacing:1px;opacity:.9}.card-number[_ngcontent-%COMP%]{font-size:24px;font-weight:600;letter-spacing:4px;text-align:center;margin:20px 0;font-family:Courier New,monospace}.card-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:16px}.card-label[_ngcontent-%COMP%]{font-size:10px;text-transform:uppercase;letter-spacing:1px;opacity:.8;margin-bottom:4px}.card-value[_ngcontent-%COMP%]{font-size:14px;font-weight:600}.magnetic-strip[_ngcontent-%COMP%]{width:calc(100% + 48px);height:50px;background:linear-gradient(90deg,#333,#000,#333);margin:-24px -24px 0;box-shadow:0 2px 10px #0000004d}.card-back[_ngcontent-%COMP%]{position:relative}.card-details[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:12px;background:#ffffff1a;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:8px;padding:16px}.detail-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-size:13px}.detail-label[_ngcontent-%COMP%]{opacity:.9;font-weight:500}.detail-value[_ngcontent-%COMP%]{font-weight:700}.utilization-container[_ngcontent-%COMP%]{background:#ffffff1a;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:8px;padding:12px}.utilization-label[_ngcontent-%COMP%]{font-size:11px;margin-bottom:8px;opacity:.9}.utilization-bar[_ngcontent-%COMP%]{width:100%;height:8px;background:#fff3;border-radius:4px;overflow:hidden}.utilization-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#4ade80,#22c55e);transition:width .3s ease;border-radius:4px}.utilization-fill.high-utilization[_ngcontent-%COMP%]{background:linear-gradient(90deg,#f59e0b,#ef4444)}.card-actions[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);display:flex;gap:24px;background:#fffffff2;padding:16px 24px;border-radius:12px;box-shadow:0 8px 24px #0003;z-index:10}.card-actions[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:28px;color:#0f1f3c;cursor:pointer;transition:transform .2s}@media(max-width:768px){.card-number[_ngcontent-%COMP%]{font-size:20px;letter-spacing:3px}.card-container[_ngcontent-%COMP%]{height:280px;width:380px}.card-chip[_ngcontent-%COMP%]{width:40px;height:30px}.card-chip[_ngcontent-%COMP%]:before{width:30px;height:22px}}.card-container[_ngcontent-%COMP%]:hover   .credit-card[_ngcontent-%COMP%]:not(.flipped){transition:transform .3s ease}.grid[_ngcontent-%COMP%]{display:grid}.grid-cols-1[_ngcontent-%COMP%]{grid-template-columns:repeat(1,minmax(0,1fr))}@media(min-width:768px){.md\\:grid-cols-2[_ngcontent-%COMP%]{grid-template-columns:repeat(2,minmax(0,1fr))}}@media(min-width:1024px){.lg\\:grid-cols-3[_ngcontent-%COMP%]{grid-template-columns:repeat(3,minmax(0,1fr))}}.rounded-\\__ph-0__[_ngcontent-%COMP%]{transition:all .3s ease}.rounded-\\__ph-0__[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001a}'],changeDetection:0})};export{he as CreditCards};
