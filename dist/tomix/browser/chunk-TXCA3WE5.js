import{A as se,B as le,F as ce,G as me,H as de,a as W,l as G,m as Y,n as K,p as Q,q as C,r as X,s as Z,t as ee,u as te,v as ie,w as ne,x as oe,y as ae,z as re}from"./chunk-ODYORDEL.js";import{$ as A,Aa as z,B as u,Ba as B,Ea as j,Ha as F,J as l,M as H,N as L,Ra as $,Va as J,W as f,X as p,Y as q,_ as I,aa as v,ba as n,ca as o,da as y,ia as M,ja as h,la as m,ra as T,sa as D,t as V,ta as r,u as x,ua as P,v as S,va as b,wa as U,za as R}from"./chunk-5JVNEETK.js";var ge=()=>[1,2,3],he=()=>({standalone:!0}),fe=(s,i)=>i.scheme_id,_e=(s,i)=>i.id;function xe(s,i){s&1&&(n(0,"div",39),y(1,"div",40),o())}function Se(s,i){s&1&&(n(0,"div",13),I(1,xe,2,0,"div",39,q),o()),s&2&&(l(),A(j(0,ge)))}function ye(s,i){s&1&&(n(0,"div",14),r(1," No schemes added "),o())}function be(s,i){if(s&1){let e=M();n(0,"div",41)(1,"div",42)(2,"div",43)(3,"div",44),y(4,"i",45),o(),n(5,"div")(6,"h3",46),r(7),o(),n(8,"p",47),r(9,"Post Office Scheme"),o()()(),n(10,"button",48),h("click",function(){let a=x(e).$implicit,c=m(2);return S(c.showSchemeHistory(a))}),y(11,"i",49),o()(),n(12,"div",50)(13,"div",51)(14,"span",52),r(15,"Total Invested"),o(),n(16,"span",53),r(17),o()(),n(18,"div",51)(19,"span",52),r(20,"Interest Earned"),o(),n(21,"span",54),r(22),o()(),n(23,"div",51)(24,"span",52),r(25,"Progress"),o(),n(26,"span",53),r(27),o()(),n(28,"div",51)(29,"span",52),r(30,"Interest Rate"),o(),n(31,"span",55),r(32),o()(),n(33,"div",51)(34,"span",52),r(35,"Started On"),o(),n(36,"span",53),r(37),o()(),n(38,"div",51)(39,"span",52),r(40,"Matures On"),o(),n(41,"span",53),r(42),o()(),n(43,"div",56)(44,"span",57),r(45,"Current Value"),o(),n(46,"span",58),r(47),o()()()()}if(s&2){let e=i.$implicit,t=m(2);l(7),P(e.scheme_name),l(10),b("\u20B9",t.formatIndianRupee(t.getSchemeTotalAmount(e.scheme_id))),l(5),b("\u20B9",t.formatIndianRupee(t.getSchemeTotalInterest(e.scheme_id))),l(5),U("",t.getSchemeMonthsPaid(e.scheme_id)," / ",t.getTotalMonths(e.scheme_id)," months"),l(5),b("",e.interest_rate,"% p.a."),l(5),P(t.getSchemeFirstInvestedDate(e.scheme_id)),l(5),P(t.getSchemeMaturityDate(e.scheme_id)),l(5),b("\u20B9",t.formatIndianRupee(t.getSchemeMaturityValue(e.scheme_id)))}}function ve(s,i){if(s&1&&(n(0,"div",13),I(1,be,48,9,"div",41,fe),o()),s&2){let e=m();l(),A(e.allSchemes())}}function Ce(s,i){s&1&&(n(0,"div",63),r(1," Loading history... "),o())}function we(s,i){s&1&&(n(0,"div",63),r(1," No history found for this scheme "),o())}function Oe(s,i){if(s&1){let e=M();n(0,"tr",70)(1,"td",71),r(2),o(),n(3,"td",72),r(4),o(),n(5,"td",71),r(6),o(),n(7,"td",71),r(8),o(),n(9,"td",71),r(10),o(),n(11,"td",73),r(12),o(),n(13,"td",74)(14,"button",75),h("click",function(){let a=x(e).$implicit,c=m(3);return S(c.deleteHistoryEntry(a.id))}),y(15,"i",76),o()()()}if(s&2){let e=i.$implicit,t=m(3);l(2),P(t.formatPaidDate(e.paid_date)),l(2),P(e.scheme_name),l(2),b("\u20B9",t.formatIndianRupee(e.principal_amount)),l(2),b("",e.interest_rate,"% p.a."),l(2),b("",(e.maturity_months/12).toFixed(1)," years"),l(2),b("\u20B9",t.formatIndianRupee(t.calculateMaturity(e)))}}function Me(s,i){if(s&1&&(n(0,"div",64)(1,"table",65)(2,"thead",66)(3,"tr")(4,"th",67),r(5,"Paid Date"),o(),n(6,"th",67),r(7,"Scheme Name"),o(),n(8,"th",67),r(9,"Amount"),o(),n(10,"th",67),r(11,"Interest Rate"),o(),n(12,"th",67),r(13,"Maturity Period"),o(),n(14,"th",67),r(15,"Current Value"),o(),n(16,"th",68),r(17,"Action"),o()()(),n(18,"tbody",69),I(19,Oe,16,6,"tr",70,_e),o()()()),s&2){let e=m(2);l(19),A(e.schemeHistory())}}function Pe(s,i){if(s&1){let e=M();n(0,"div",15)(1,"div",59)(2,"h3",60),r(3,"Scheme History"),o(),n(4,"button",61),h("click",function(){x(e);let a=m();return a.showHistoryForScheme.set(null),S(a.schemeHistory.set([]))}),y(5,"i",62),o()(),f(6,Ce,2,0,"div",63)(7,we,2,0,"div",63)(8,Me,21,0,"div",64),o()}if(s&2){let e=m();l(6),p(e.isLoadingHistory()?6:e.schemeHistory().length===0?7:8)}}function Ee(s,i){if(s&1){let e=M();n(0,"div",21)(1,"label",77)(2,"input",78),B("ngModelChange",function(a){x(e);let c=m();return z(c.isAddingNew,a)||(c.isAddingNew=a),S(a)}),h("change",function(){x(e);let a=m();return S(a.onSchemeTypeChange())}),o(),n(3,"span",22),r(4,"Add New Scheme"),o()(),n(5,"label",77)(6,"input",78),B("ngModelChange",function(a){x(e);let c=m();return z(c.isAddingNew,a)||(c.isAddingNew=a),S(a)}),h("change",function(){x(e);let a=m();return S(a.onSchemeTypeChange())}),o(),n(7,"span",22),r(8,"Select Existing"),o()()()}if(s&2){let e=m();l(2),v("value",!0),R("ngModel",e.isAddingNew),v("ngModelOptions",j(6,he)),l(4),v("value",!1),R("ngModel",e.isAddingNew),v("ngModelOptions",j(7,he))}}function Ie(s,i){if(s&1&&(n(0,"option",81),r(1),o()),s&2){let e=i.$implicit;v("value",e.scheme_id),l(),P(e.scheme_name)}}function Ae(s,i){s&1&&(n(0,"p",84),r(1," This will create a new entry for this scheme. "),o())}function Te(s,i){s&1&&(n(0,"p",85),r(1," \u26A0\uFE0F This will update the scheme details. Changes will not affect existing entries. "),o())}function De(s,i){s&1&&(n(0,"p",86),r(1," \u26A0\uFE0F This will permanently delete this scheme entry. "),o())}function Fe(s,i){if(s&1){let e=M();n(0,"div")(1,"label",22),r(2,"What would you like to do?"),o(),n(3,"div",82)(4,"button",83),h("click",function(){x(e);let a=m(2);return S(a.schemeAction.set(""))}),r(5," Add Entry "),o(),n(6,"button",83),h("click",function(){x(e);let a=m(2);return S(a.onSchemeActionChange("edit"))}),r(7," Edit Scheme "),o(),n(8,"button",83),h("click",function(){x(e);let a=m(2);return S(a.onSchemeActionChange("delete"))}),r(9," Delete "),o()(),f(10,Ae,2,0,"p",84)(11,Te,2,0,"p",85)(12,De,2,0,"p",86),o()}if(s&2){let e=m(2);l(4),D(e.schemeAction()===""?"bg-blue-500 text-white":"bg-gray-200 text-gray-700"),l(2),D(e.schemeAction()==="edit"?"bg-orange-500 text-white":"bg-gray-200 text-gray-700"),l(2),D(e.schemeAction()==="delete"?"bg-red-500 text-white":"bg-gray-200 text-gray-700"),l(2),p(e.schemeAction()===""?10:e.schemeAction()==="edit"?11:e.schemeAction()==="delete"?12:-1)}}function ke(s,i){if(s&1){let e=M();n(0,"div")(1,"label",22),r(2,"Select Existing Scheme"),o(),n(3,"select",79),h("change",function(a){x(e);let c=m();return S(c.onExistingSchemeSelect(a))}),n(4,"option",80),r(5,"Select a scheme"),o(),I(6,Ie,2,2,"option",81,fe),o()(),f(8,Fe,13,7,"div")}if(s&2){let e=m();l(6),A(e.allSchemes()),l(2),p(e.selectedExistingScheme()&&!e.editingSchemeId()?8:-1)}}function Ne(s,i){s&1&&(n(0,"p",25),r(1,"Scheme name is required"),o())}function Ve(s,i){s&1&&(n(0,"p",25),r(1,"Interest rate is required"),o())}function He(s,i){s&1&&(n(0,"p",25),r(1,"Investment amount is required"),o())}function je(s,i){s&1&&(n(0,"p",25),r(1,"Paid date is required"),o())}function Re(s,i){s&1&&(n(0,"p",25),r(1,"Maturity period is required"),o())}function ze(s,i){s&1&&r(0," Delete ")}function Be(s,i){s&1&&r(0," Update Scheme ")}function Le(s,i){s&1&&r(0," Update Entry ")}function qe(s,i){s&1&&r(0," Add Scheme ")}var ue=class s{constructor(i,e,t){this.fb=i;this.authService=e;this.router=t;this.authService.session$.subscribe(a=>{a||this.router.navigate(["/login"])}),this.schemeForm=this.fb.group({scheme_name:["",C.required],interest_rate:[0,[C.required,C.min(0)]],principal_amount:[0,[C.required,C.min(0)]],maturity_years:[1,[C.required,C.min(.5)]],paid_date:["",C.required],existing_scheme_id:[""]})}showAddScheme=u(!1);schemeForm;editingSchemeId=u(null);selectedSchemeId=u(null);isCheckingData=u(!0);userId=u(null);schemes=u([]);isAddingNew=u(!0);selectedExistingScheme=u(null);schemeAction=u("");showHistoryForScheme=u(null);schemeHistory=u([]);isLoadingHistory=u(!1);schemeTotals=u(new Map);supabaseService=V(W);postOfficeSchemesService=V(G);appDataStore=V(Y);allSchemes=F(()=>{let i=this.schemes(),e=new Map;return i.forEach(t=>{t.scheme_id&&!e.has(t.scheme_id)&&e.set(t.scheme_id,t)}),Array.from(e.values())});totalInvestment=F(()=>this.allSchemes().reduce((i,e)=>{let t=this.schemeTotals().get(e.scheme_id);return i+(t?t.totalAmount:0)},0));totalMaturityValue=F(()=>this.allSchemes().reduce((i,e)=>{let t=this.schemeTotals().get(e.scheme_id);return i+(t?t.maturityValue:0)},0));totalInterest=F(()=>this.allSchemes().reduce((i,e)=>{let t=this.schemeTotals().get(e.scheme_id);return i+(t?t.totalInterest:0)},0));async ngOnInit(){try{let i=await this.supabaseService.getCurrentUser();i&&await this.loadSchemes(i.id)}catch(i){console.error("Failed to get user:",i);let e=this.getOrCreateDemoUserId();this.userId.set(e),await this.loadSchemes(e)}}getOrCreateDemoUserId(){let i="demo-user-id",e=localStorage.getItem(i);return e||(e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){let a=Math.random()*16|0;return(t==="x"?a:a&3|8).toString(16)}),localStorage.setItem(i,e)),e}async loadSchemes(i){if(this.isCheckingData.set(!0),!!i)try{if(this.appDataStore.postOfficeSchemesLoaded()&&this.appDataStore.currentUserId()===i){let t=this.appDataStore.postOfficeSchemes();this.schemes.set(t),console.log("Using cached post office schemes data")}else{await this.appDataStore.loadPostOfficeSchemes(i);let t=this.appDataStore.postOfficeSchemes();this.schemes.set(t)}let e=this.allSchemes();await this.loadSchemeTotals(e)}catch(e){console.error("Error loading schemes:",e)}finally{this.isCheckingData.set(!1)}}async loadSchemeTotals(i){let e=new Map;for(let t of i)if(t.scheme_id)try{let a=await this.postOfficeSchemesService.getSchemeHistory(this.userId(),t.scheme_id),c=a.reduce((O,E)=>O+E.principal_amount,0),d=0,g=a.reduce((O,E)=>{let N=new Date(E.paid_date);return N<O?N:O},new Date(a[0].paid_date)),_=new Date(g);_.setMonth(_.getMonth()+a[0].maturity_months);let w=new Date;a.forEach(O=>{let E=new Date(O.paid_date),N=(w.getTime()-E.getTime())/(1e3*60*60*24*365.25),pe=O.principal_amount*Math.pow(1+O.interest_rate/100,N);d+=pe});let k=d-c;e.set(t.scheme_id,{totalAmount:c,totalInterest:k,maturityValue:Math.round(d*100)/100,firstInvestedDate:g,maturityDate:_})}catch(a){console.error("Error loading scheme totals:",a)}this.schemeTotals.set(e)}openAddScheme(){this.showAddScheme.set(!0),this.resetForm()}closeAddScheme(){this.showAddScheme.set(!1),this.resetForm()}resetForm(){this.schemeForm.reset({scheme_name:"",interest_rate:0,principal_amount:0,maturity_years:1,paid_date:"",existing_scheme_id:""}),this.editingSchemeId.set(null),this.isAddingNew.set(!0),this.selectedExistingScheme.set(null),this.schemeAction.set("")}onSchemeTypeChange(){this.schemeForm.patchValue({existing_scheme_id:""}),this.selectedExistingScheme.set(null),this.schemeAction.set("")}onExistingSchemeSelect(i){let t=i.target.value;if(!t){this.selectedExistingScheme.set(null);return}let a=this.allSchemes().find(c=>c.scheme_id===t);a&&(this.selectedExistingScheme.set(a),this.schemeAction.set(""),this.schemeForm.patchValue({scheme_name:a.scheme_name,interest_rate:a.interest_rate,principal_amount:a.principal_amount,maturity_years:a.maturity_months/12,paid_date:a.paid_date}))}onSchemeActionChange(i){if(this.schemeAction.set(i),i==="edit"){let e=this.selectedExistingScheme();e&&this.schemeForm.patchValue({scheme_name:e.scheme_name,interest_rate:e.interest_rate,principal_amount:e.principal_amount,maturity_years:e.maturity_months/12,paid_date:e.paid_date})}}async submitScheme(){if(this.schemeForm.invalid&&this.schemeAction()!=="delete"){Object.keys(this.schemeForm.controls).forEach(e=>{this.schemeForm.get(e)?.markAsTouched()});return}let i=this.userId();if(i)try{let e=this.schemeAction(),t=this.selectedExistingScheme(),a=Math.round(this.schemeForm.value.maturity_years*12),c=new Date(this.schemeForm.value.paid_date),d=new Date(c);if(d.setMonth(d.getMonth()+a),e==="delete"&&t)await this.postOfficeSchemesService.deletePostOfficeScheme(t.id),alert("Scheme deleted successfully!");else if(this.editingSchemeId())await this.postOfficeSchemesService.updatePostOfficeScheme(this.editingSchemeId(),{scheme_name:this.schemeForm.value.scheme_name,interest_rate:this.schemeForm.value.interest_rate,principal_amount:this.schemeForm.value.principal_amount,maturity_months:a,paid_date:this.schemeForm.value.paid_date,maturity_date:d.toISOString().split("T")[0]}),alert("Scheme updated successfully!");else if(t){let g={user_id:i,scheme_id:t.scheme_id,scheme_name:t.scheme_name,interest_rate:t.interest_rate,principal_amount:this.schemeForm.value.principal_amount,maturity_months:t.maturity_months,paid_date:this.schemeForm.value.paid_date,maturity_date:d.toISOString().split("T")[0]};await this.postOfficeSchemesService.addPostOfficeScheme(g),alert("Scheme entry added successfully!")}else{let g=crypto.randomUUID(),_={user_id:i,scheme_id:g,scheme_name:this.schemeForm.value.scheme_name,interest_rate:this.schemeForm.value.interest_rate,principal_amount:this.schemeForm.value.principal_amount,maturity_months:a,paid_date:this.schemeForm.value.paid_date,maturity_date:d.toISOString().split("T")[0]};await this.postOfficeSchemesService.addPostOfficeScheme(_),alert("Scheme created successfully!")}i&&await this.loadSchemes(i),this.closeAddScheme()}catch(e){console.error("Error submitting scheme:",e),alert("Failed to save scheme. Please try again.")}}async showSchemeHistory(i){this.showHistoryForScheme.set(i.scheme_id),this.isLoadingHistory.set(!0);try{let e=await this.postOfficeSchemesService.getSchemeHistory(this.userId(),i.scheme_id);this.schemeHistory.set(e)}catch(e){console.error("Error loading scheme history:",e)}finally{this.isLoadingHistory.set(!1)}}editScheme(i){this.editingSchemeId.set(i.id),this.schemeForm.patchValue({scheme_name:i.scheme_name,interest_rate:i.interest_rate,principal_amount:i.principal_amount,maturity_years:i.maturity_months/12,paid_date:i.paid_date}),this.showAddScheme.set(!0)}async deleteScheme(i){if(confirm("Are you sure you want to delete this scheme?"))try{let e=this.userId();await this.postOfficeSchemesService.deletePostOfficeScheme(i),e&&await this.loadSchemes(e),alert("Scheme deleted successfully!")}catch(e){console.error("Error deleting scheme:",e),alert("Failed to delete scheme. Please try again.")}}async deleteHistoryEntry(i){if(confirm("Are you sure you want to delete this scheme entry?"))try{await this.postOfficeSchemesService.deletePostOfficeScheme(i);let e=this.showHistoryForScheme(),t=this.userId();if(e&&t){let a=await this.postOfficeSchemesService.getSchemeHistory(t,e);this.schemeHistory.set(a),await this.loadSchemes(t)}}catch(e){console.error("Error deleting scheme entry:",e),alert("Failed to delete scheme entry. Please try again.")}}formatIndianRupee(i){return i.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}onAmountChange(i,e){let t=i.target,a=t.value.replace(/,/g,"");if(a===""||isNaN(Number(a))){this.schemeForm.patchValue({[e]:0}),t.value="0";return}let c=parseFloat(a);this.schemeForm.patchValue({[e]:c}),t.value=this.formatIndianRupee(c)}calculateMaturity(i){let e=new Date(i.paid_date),a=(new Date().getTime()-e.getTime())/(1e3*60*60*24*365.25),c=i.principal_amount*Math.pow(1+i.interest_rate/100,a);return Math.round(c*100)/100}calculateInterest(i){return this.calculateMaturity(i)-i.principal_amount}getMonthsPaid(i){if(!i.paid_date)return 0;let e=new Date(i.paid_date),a=new Date().getTime()-e.getTime(),c=Math.floor(a/(1e3*60*60*24*30.44));return Math.max(0,Math.min(c,i.maturity_months))}getSchemeMonthsPaid(i){let e=this.schemes().filter(_=>_.scheme_id===i);if(e.length===0)return 0;let t=e.reduce((_,w)=>{let k=new Date(w.paid_date);return k<_?k:_},new Date(e[0].paid_date)),c=new Date().getTime()-t.getTime(),d=Math.ceil(c/(1e3*60*60*24*30.44)),g=e[0].maturity_months;return Math.max(c>=0?1:0,Math.min(d,g))}getTotalMonths(i){let e=this.allSchemes().find(t=>t.scheme_id===i);return e?e.maturity_months:0}getSchemeGradient(){return"linear-gradient(135deg, #ff6b35 0%, #f7931e 50%, #fdc830 100%)"}getPlanGradient(){return"#ffffff"}getRemainingMonths(i){if(!i.maturity_date)return 0;let e=new Date,a=new Date(i.maturity_date).getTime()-e.getTime(),c=Math.ceil(a/(1e3*60*60*24*30));return Math.max(0,c)}formatPaidDate(i){if(!i)return"N/A";let e=new Date(i);return`${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()]} ${e.getFullYear()}`}getSchemeTotalAmount(i){let e=this.schemeTotals().get(i);return e?e.totalAmount:0}getSchemeTotalInterest(i){let e=this.schemeTotals().get(i);return e?e.totalInterest:0}getSchemeMaturityValue(i){let e=this.schemeTotals().get(i);return e?e.maturityValue:0}getSchemeMaturityDate(i){let e=this.schemeTotals().get(i);if(!e)return"N/A";let t=e.maturityDate;return`${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()]} ${t.getFullYear()}`}getSchemeFirstInvestedDate(i){let e=this.schemeTotals().get(i);if(!e)return"N/A";let t=e.firstInvestedDate;return`${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()]} ${t.getFullYear()}`}static \u0275fac=function(e){return new(e||s)(H(ce),H(K),H(J))};static \u0275cmp=L({type:s,selectors:[["app-post-office"]],decls:84,vars:28,consts:[[1,"w-full","h-full","flex","flex-col","2xl:px-8","md:px-5"],[1,"w-full","2xl:h-[15%]","flex","place-items-center","justify-between"],[1,"font-medium","2xl:text-[25px]","text-[22px]","flex","items-center","gap-3"],[1,"bx","bx-envelope","text-3xl","text-orange-600"],[1,"flex","gap-3","justify-center","place-items-center"],[1,"p-3","flex","justify-center","place-items-center"],[1,"bx","bx-plus","rounded-[10px]","bg-[#08B783]","p-3","2xl:text-[20px]","text-[16px]","font-bold",2,"color","#ffffff",3,"click"],[1,"w-full","h-[85%]","flex","pb-5","2xl:gap-5","gap-2","flex-col"],[1,"w-full","flex-1","rounded-[10px]","bg-[#F7FCFC]","p-5","overflow-hidden"],[1,"w-full","h-full","flex","flex-col"],[1,"font-medium","2xl:text-[20px]","text-[16px]","mb-4","shrink-0","flex","items-center","gap-2"],[1,"bx","bx-building","text-orange-600"],[1,"flex-1","overflow-y-auto","min-h-0"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],[1,"w-full","flex","items-center","justify-center","text-gray-400","h-full"],[1,"mt-6","border-t","pt-6"],[1,"fixed","top-0","right-0","z-50","h-full","2xl:max-w-md","w-sm","bg-white","shadow-2xl","transform","transition-transform","duration-300","ease-in-out","flex","flex-col","translate-x-full"],[1,"flex","items-center","justify-between","p-4","border-b","bg-linear-to-r","from-orange-400","to-orange-600"],[1,"2xl:text-lg","font-semibold","text-white"],[1,"text-2xl","text-white","hover:text-gray-200",3,"click"],[1,"flex","flex-col","2xl:gap-4","gap-2","p-4","overflow-y-auto","flex-1","2xl:text-[15px]","text-[12px]",3,"ngSubmit","formGroup"],[1,"flex","gap-4","mb-4"],[1,"text-sm","font-medium"],[1,"text-red-500"],["type","text","formControlName","scheme_name","placeholder","e.g., PPF, NSC, SCSS",1,"mt-1","w-full","rounded-lg","border","px-3","py-2","outline-none",3,"readonly"],[1,"text-red-500","text-xs","mt-1"],[1,"relative"],["type","number","step","0.01","formControlName","interest_rate","placeholder","7.1",1,"mt-1","w-full","rounded-lg","border","px-3","py-2","outline-none",3,"readonly"],[1,"absolute","right-3","top-3","text-gray-500"],[1,"absolute","left-3","top-3","text-gray-500"],["type","text","formControlName","principal_amount","placeholder","0",1,"mt-1","w-full","rounded-lg","border","px-10","py-2","outline-none",3,"input"],["type","date","formControlName","paid_date",1,"mt-1","w-full","rounded-lg","border","px-3","py-2","outline-none"],[1,"flex","gap-2"],["type","number","step","0.5","formControlName","maturity_years","placeholder","1",1,"mt-1","flex-1","rounded-lg","border","px-3","py-2","outline-none",3,"readonly"],[1,"mt-1","px-4","py-2","bg-gray-100","rounded-lg","flex","items-center","text-gray-600"],[1,"text-xs","text-gray-500","mt-1"],[1,"mt-auto","flex","gap-3","pt-4"],["type","button",1,"flex-1","rounded-lg","bg-gray-200","py-2","hover:bg-gray-300",3,"click"],["type","submit",1,"flex-1","rounded-lg","text-white","py-2","transition-colors"],[1,"skeleton-card"],[1,"skeleton","skeleton-card-content"],[1,"scheme-card","bg-white","rounded-xl","border-2","border-gray-200","hover:border-orange-400","transition-all","duration-300","p-6","shadow-sm","hover:shadow-md"],[1,"flex","items-start","justify-between","mb-4"],[1,"flex","items-center","gap-3"],[1,"w-12","h-12","bg-orange-100","rounded-lg","flex","items-center","justify-center"],[1,"bx","bx-envelope","text-2xl","text-orange-600"],[1,"font-bold","text-lg","text-gray-800"],[1,"text-sm","text-gray-500"],["type","button",1,"text-gray-400","hover:text-orange-600","transition-colors",3,"click"],[1,"bx","bx-info-circle","text-2xl"],[1,"space-y-3"],[1,"flex","justify-between","items-center","py-2","border-b","border-gray-100"],[1,"text-sm","text-gray-600"],[1,"font-semibold","text-gray-900"],[1,"font-semibold","text-green-600"],[1,"font-semibold","text-blue-600"],[1,"flex","justify-between","items-center","py-3","bg-orange-50","rounded-lg","px-3","mt-3"],[1,"text-sm","font-medium","text-orange-700"],[1,"font-bold","text-lg","text-orange-600"],[1,"flex","items-center","justify-between","mb-4"],[1,"font-medium","2xl:text-[18px]","text-[16px]"],["type","button",1,"text-gray-500","hover:text-gray-700",3,"click"],[1,"bx","bx-x","text-2xl"],[1,"text-center","text-gray-400","py-8"],[1,"overflow-x-auto"],[1,"w-full"],[1,"bg-gray-100"],[1,"px-4","py-3","text-left","text-xs","font-medium","text-gray-600","uppercase"],[1,"px-4","py-3","text-center","text-xs","font-medium","text-gray-600","uppercase"],[1,"divide-y","divide-gray-200"],[1,"hover:bg-gray-50"],[1,"px-4","py-3","text-sm"],[1,"px-4","py-3","text-sm","font-medium"],[1,"px-4","py-3","text-sm","font-bold","text-blue-600"],[1,"px-4","py-3","text-sm","text-center"],["type","button","title","Delete this entry",1,"text-red-500","hover:text-red-700","hover:bg-red-50","p-1","rounded","transition-colors",3,"click"],[1,"bx","bx-trash","text-lg"],[1,"flex","items-center","gap-2","cursor-pointer"],["type","radio",1,"cursor-pointer",3,"ngModelChange","change","value","ngModel","ngModelOptions"],["formControlName","existing_scheme_id",1,"mt-1","w-full","rounded-lg","border","px-3","py-2","outline-none","text-gray-900",3,"change"],["value",""],[3,"value"],[1,"flex","gap-3","mt-2"],["type","button",1,"flex-1","py-2","px-4","rounded-lg","font-medium","transition-colors",3,"click"],[1,"text-xs","text-gray-500","mt-2"],[1,"text-xs","text-orange-600","mt-2"],[1,"text-xs","text-red-600","mt-2"]],template:function(e,t){if(e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2),y(3,"i",3),n(4,"span"),r(5,"Post Office Investments"),o()(),n(6,"div",4)(7,"div",5)(8,"i",6),h("click",function(){return t.openAddScheme()}),o()()()(),n(9,"div",7)(10,"div",8)(11,"div",9)(12,"div",10),y(13,"i",11),n(14,"span"),r(15,"Your Post Office Schemes"),o()(),n(16,"div",12),f(17,Se,3,1,"div",13)(18,ye,2,0,"div",14)(19,ve,3,0,"div",13),o(),f(20,Pe,9,1,"div",15),o()()(),n(21,"div",16)(22,"div",17)(23,"h2",18),r(24),o(),n(25,"button",19),h("click",function(){return t.closeAddScheme()}),r(26,"\u2715"),o()(),n(27,"form",20),h("ngSubmit",function(){return t.submitScheme()}),f(28,Ee,9,8,"div",21),f(29,ke,9,1),n(30,"div")(31,"label",22),r(32,"Scheme Name "),n(33,"span",23),r(34,"*"),o()(),y(35,"input",24),f(36,Ne,2,0,"p",25),o(),n(37,"div")(38,"label",22),r(39,"Interest Rate (% p.a.) "),n(40,"span",23),r(41,"*"),o()(),n(42,"div",26),y(43,"input",27),n(44,"span",28),r(45,"%"),o()(),f(46,Ve,2,0,"p",25),o(),n(47,"div")(48,"label",22),r(49,"Investment Amount "),n(50,"span",23),r(51,"*"),o()(),n(52,"div",26)(53,"span",29),r(54,"\u20B9"),o(),n(55,"input",30),h("input",function(c){return t.onAmountChange(c,"principal_amount")}),o()(),f(56,He,2,0,"p",25),o(),n(57,"div")(58,"label",22),r(59,"Paid Date "),n(60,"span",23),r(61,"*"),o()(),y(62,"input",31),f(63,je,2,0,"p",25),o(),n(64,"div")(65,"label",22),r(66,"Maturity Period "),n(67,"span",23),r(68,"*"),o()(),n(69,"div",32),y(70,"input",33),n(71,"div",34),r(72,"years"),o()(),n(73,"p",35),r(74),o(),f(75,Re,2,0,"p",25),o(),n(76,"div",36)(77,"button",37),h("click",function(){return t.closeAddScheme()}),r(78," Cancel "),o(),n(79,"button",38),f(80,ze,1,0)(81,Be,1,0)(82,Le,1,0)(83,qe,1,0),o()()()()()),e&2){let a,c,d,g,_,w;l(17),p(t.isCheckingData()?17:t.allSchemes().length===0?18:19),l(3),p(t.showHistoryForScheme()?20:-1),l(),T("translate-x-0",t.showAddScheme())("translate-x-full",!t.showAddScheme()),l(3),b(" ",t.editingSchemeId()?"Edit Scheme":"Add Scheme"," "),l(3),v("formGroup",t.schemeForm),l(),p(t.editingSchemeId()?-1:28),l(),p(!t.isAddingNew()&&!t.editingSchemeId()?29:-1),l(6),T("bg-gray-100",t.selectedExistingScheme()&&t.schemeAction()===""),v("readonly",t.selectedExistingScheme()&&t.schemeAction()===""),l(),p((a=t.schemeForm.get("scheme_name"))!=null&&a.invalid&&((a=t.schemeForm.get("scheme_name"))!=null&&a.touched)?36:-1),l(7),T("bg-gray-100",t.selectedExistingScheme()&&t.schemeAction()===""),v("readonly",t.selectedExistingScheme()&&t.schemeAction()===""),l(3),p((c=t.schemeForm.get("interest_rate"))!=null&&c.invalid&&((c=t.schemeForm.get("interest_rate"))!=null&&c.touched)?46:-1),l(10),p((d=t.schemeForm.get("principal_amount"))!=null&&d.invalid&&((d=t.schemeForm.get("principal_amount"))!=null&&d.touched)?56:-1),l(7),p((g=t.schemeForm.get("paid_date"))!=null&&g.invalid&&((g=t.schemeForm.get("paid_date"))!=null&&g.touched)?63:-1),l(7),T("bg-gray-100",t.selectedExistingScheme()&&t.schemeAction()===""),v("readonly",t.selectedExistingScheme()&&t.schemeAction()===""),l(4),b(" ",(((_=t.schemeForm.get("maturity_years"))==null?null:_.value)*12).toFixed(0)," months "),l(),p((w=t.schemeForm.get("maturity_years"))!=null&&w.invalid&&((w=t.schemeForm.get("maturity_years"))!=null&&w.touched)?75:-1),l(4),D(t.schemeAction()==="delete"?"bg-red-500 hover:bg-red-600":"bg-emerald-500 hover:bg-emerald-600"),l(),p(t.schemeAction()==="delete"?80:t.schemeAction()==="edit"?81:t.editingSchemeId()?82:83)}},dependencies:[de,te,se,le,Q,ie,re,ne,X,Z,ae,oe,me,ee,$],styles:[".scheme-container[_ngcontent-%COMP%]{perspective:1000px;cursor:pointer;height:300px}.post-office-scheme[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;transition:transform .6s;transform-style:preserve-3d}.post-office-scheme.flipped[_ngcontent-%COMP%]{transform:rotateY(180deg)}.scheme-face[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;backface-visibility:hidden;border-radius:16px;padding:20px;box-shadow:0 8px 20px #00000026;color:#fff;display:flex;flex-direction:column;background:linear-gradient(135deg,#ff6b35,#f7931e,#fdc830)}.scheme-front[_ngcontent-%COMP%]{z-index:2}.post-office-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;padding-bottom:12px;border-bottom:2px solid rgba(255,255,255,.3)}.post-office-logo[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:4px;background:#ffffff26;padding:8px 16px;border-radius:8px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.post-office-emblem[_ngcontent-%COMP%]{background:#ffffff26;padding:8px;border-radius:50%;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.scheme-name[_ngcontent-%COMP%]{font-size:20px;margin-bottom:20px;min-height:60px;display:flex;align-items:center;padding:12px;background:#ffffff1a;border-radius:8px;border-left:4px solid rgba(255,255,255,.5)}.scheme-info[_ngcontent-%COMP%]{margin-top:auto}.info-row-po[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background:#ffffff1a;padding:8px 12px;border-radius:6px;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px)}.info-label-po[_ngcontent-%COMP%]{font-size:12px;opacity:.9;font-weight:500}.info-value-po[_ngcontent-%COMP%]{font-size:15px;font-weight:700;letter-spacing:.5px}.post-office-footer[_ngcontent-%COMP%]{margin-top:16px;text-align:center;padding-top:12px;border-top:2px solid rgba(255,255,255,.3);font-style:italic}.scheme-back[_ngcontent-%COMP%]{transform:rotateY(180deg);padding:24px}.scheme-details[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;gap:8px;overflow-y:auto}.detail-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:6px 0;border-bottom:1px solid rgba(255,255,255,.2);font-size:13px}.detail-row.highlight[_ngcontent-%COMP%]{background:#fff3;padding:10px;border-radius:8px;border-bottom:none;margin-top:6px;font-size:14px}.detail-label[_ngcontent-%COMP%]{font-size:12px;opacity:.95;font-weight:500}.detail-value[_ngcontent-%COMP%]{font-size:13px;font-weight:700}.detail-row.highlight[_ngcontent-%COMP%]   .detail-value[_ngcontent-%COMP%]{font-size:15px}.scheme-actions[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);display:flex;gap:16px;z-index:10}.action-btn[_ngcontent-%COMP%]{background:#fffffff2;width:48px;height:48px;border-radius:50%;display:flex;align-items:center;justify-content:center;border:none;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 12px #0003}.action-btn[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.action-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:24px}.edit-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#f97316}.delete-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#ef4444}.skeleton-card[_ngcontent-%COMP%]{height:300px;border-radius:16px;overflow:hidden;background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0,#f0f0f0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_loading 1.5s ease-in-out infinite}.skeleton-card-content[_ngcontent-%COMP%]{width:100%;height:100%}@keyframes _ngcontent-%COMP%_loading{0%{background-position:200% 0}to{background-position:-200% 0}}@media(max-width:768px){.scheme-container[_ngcontent-%COMP%]{height:280px}.scheme-name[_ngcontent-%COMP%]{font-size:16px;min-height:50px}.info-value-po[_ngcontent-%COMP%]{font-size:13px}.action-btn[_ngcontent-%COMP%]{width:40px;height:40px}.action-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px}}table[_ngcontent-%COMP%]{border-collapse:separate;border-spacing:0;border-radius:8px;overflow:hidden}thead[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffedd5,#fed7aa)}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#fff7ed}tbody[_ngcontent-%COMP%]   tr.bg-orange-100[_ngcontent-%COMP%]{background:#ffedd5;font-weight:600}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{padding:12px 16px}.overflow-y-auto[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.overflow-y-auto[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:10px}.overflow-y-auto[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ff6b35;border-radius:10px}.overflow-y-auto[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#f7931e}.scheme-details[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}.scheme-details[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#ffffff1a}.scheme-details[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ffffff4d;border-radius:10px}"],changeDetection:0})};export{ue as PostOffice};
