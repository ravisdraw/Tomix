import{a as H}from"./chunk-YBM54P4T.js";import{A as ne,B as oe,C as le,D as re,F as ae,H as se,a as q,b as z,m as G,n as Y,o as J,p as K,q as x,r as Q,s as W,u as X,v as Z,x as ee,y as te,z as ie}from"./chunk-ODYORDEL.js";import{$ as w,B as h,Ea as B,Ga as L,Ha as k,J as a,M as I,N as j,Qa as R,R as D,Ra as U,Va as $,W as b,X as g,Z as M,_ as C,aa as y,ba as i,ca as n,da as p,ha as V,ia as F,ja as S,la as c,pa as N,ra as A,sa as O,t as E,ta as r,u as _,ua as v,v as f,va as m,wa as P}from"./chunk-5JVNEETK.js";var ue=()=>[1,2,3],ce=(l,e)=>e.id;function pe(l,e){l&1&&V(0)}function me(l,e){if(l&1&&D(0,pe,1,0,"ng-container",69),l&2){c();let t=N(130);y("ngTemplateOutlet",t)}}function xe(l,e){l&1&&(i(0,"div",17),r(1," No subscriptions added yet "),n())}function be(l,e){if(l&1&&(i(0,"div",12),r(1),n()),l&2){let t=c().$implicit;a(),v(t.plan_details)}}function ge(l,e){if(l&1&&(i(0,"div",12),r(1),n()),l&2){let t=c().$implicit,o=c(2);a(),P(" ",o.getBillingCycleText(t.billing_cycle||"monthly")," - Day ",t.billing_date," ")}}function _e(l,e){l&1&&(i(0,"div",76),r(1," \u{1F4F1} Mobile Recharge "),n())}function fe(l,e){if(l&1&&(i(0,"div",82),r(1),n(),i(2,"div",12),r(3),n()),l&2){let t=c().$implicit,o=c(2);O(o.calculateDaysLeft(t.billing_date)<=3?"text-red-500":"text-[#08B783]"),a(),m(" ",o.getDaysLeftText(o.calculateDaysLeft(t.billing_date))," "),a(2),m(" Next: ",o.getNextBillingDate(t.billing_date)," ")}}function Se(l,e){l&1&&(i(0,"div",79),r(1,"As needed"),n())}function ve(l,e){l&1&&(i(0,"div",80),r(1," Expiring Soon! "),n())}function he(l,e){if(l&1){let t=F();i(0,"div",81)(1,"i",83),S("click",function(s){_(t);let d=c().$implicit;return c(2).editSubscription(d),f(s.stopPropagation())}),n(),i(2,"i",84),S("click",function(s){_(t);let d=c().$implicit;return c(2).deleteSubscription(d.id),f(s.stopPropagation())}),n()()}}function ye(l,e){if(l&1){let t=F();i(0,"div",71),S("click",function(){let s=_(t).$implicit,d=c(2);return f(d.toggleSubscriptionSelection(s.id))}),i(1,"div",72)(2,"div",73)(3,"div",74),r(4),n(),i(5,"div",10)(6,"div",75),r(7),n(),b(8,be,2,1,"div",12),b(9,ge,2,2,"div",12)(10,_e,2,0,"div",76),n()(),i(11,"div",77)(12,"div",78),r(13),n(),b(14,fe,4,4)(15,Se,2,0,"div",79),b(16,ve,2,0,"div",80),n()(),b(17,he,3,0,"div",81),n()}if(l&2){let t=e.$implicit,o=c(2);a(),A("opacity-40",o.selectedSubscriptionId()===t.id),a(3),v(t.emoji||"\u{1F4B3}"),a(3),v(t.name),a(),g(t.plan_details?8:-1),a(),g(o.isMobileRecharge(t)?10:9),a(4),m(" Rs. ",o.formatIndianRupee(t.billing_amount)," "),a(),g(o.isMobileRecharge(t)?15:14),a(2),g(o.isExpiringSoon(t.end_date)?16:-1),a(),g(o.selectedSubscriptionId()===t.id?17:-1)}}function Ce(l,e){if(l&1&&C(0,ye,18,10,"div",70,ce),l&2){let t=c();w(t.activeSubscriptions())}}function we(l,e){l&1&&V(0)}function Ee(l,e){if(l&1&&D(0,we,1,0,"ng-container",69),l&2){c();let t=N(130);y("ngTemplateOutlet",t)}}function Ie(l,e){l&1&&(i(0,"div",23),r(1," No upcoming bills in next 7 days "),n())}function De(l,e){if(l&1&&(i(0,"div",85)(1,"div",72)(2,"div",86)(3,"div",87),r(4),n(),i(5,"div",10)(6,"div",88),r(7),n(),i(8,"div",12),r(9),n()()(),i(10,"div",77)(11,"div",89),r(12),n(),i(13,"div",82),r(14),n()()()()),l&2){let t=e.$implicit,o=c(2);a(4),v(t.emoji||"\u{1F4B3}"),a(3),v(t.name),a(2),m(" ",o.getNextBillingDate(t.billing_date)," "),a(3),m(" Rs. ",o.formatIndianRupee(t.billing_amount)," "),a(),O(o.calculateDaysLeft(t.billing_date)<=3?"text-red-500":"text-orange-500"),a(),m(" ",o.getDaysLeftText(o.calculateDaysLeft(t.billing_date))," ")}}function Fe(l,e){if(l&1&&C(0,De,15,7,"div",85,ce),l&2){let t=c();w(t.upcomingSubscriptions())}}function ke(l,e){l&1&&(i(0,"p",51),r(1,"Subscription name is required"),n())}function Te(l,e){l&1&&(i(0,"p",51),r(1,"Amount is required and must be greater than 0"),n())}function Me(l,e){l&1&&(i(0,"p",51),r(1,"Billing date must be between 1 and 31"),n())}function Ve(l,e){if(l&1&&(i(0,"option",92),r(1),n()),l&2){let t=e.$implicit,o=c(2);y("value",t),a(),v(o.getBillingCycleText(t))}}function Ne(l,e){if(l&1&&(i(0,"div")(1,"label",48),r(2,"Billing Date "),i(3,"span",49),r(4,"*"),n()(),p(5,"input",90),b(6,Me,2,0,"p",51),n(),i(7,"div")(8,"label",48),r(9,"Billing Cycle "),i(10,"span",49),r(11,"*"),n()(),i(12,"select",91),C(13,Ve,2,2,"option",92,M),n()(),i(15,"div")(16,"label",48),r(17,"Start Date "),i(18,"span",49),r(19,"*"),n()(),p(20,"input",93),n()),l&2){let t,o=c();a(6),g((t=o.subscriptionForm.get("billing_date"))!=null&&t.invalid&&((t=o.subscriptionForm.get("billing_date"))!=null&&t.touched)?6:-1),a(7),w(o.billingCycles)}}function Ae(l,e){l&1&&(i(0,"div",95),p(1,"div",96),i(2,"div",47),p(3,"div",97)(4,"div",98),n(),i(5,"div",99),p(6,"div",100)(7,"div",101),n()())}function Oe(l,e){l&1&&(i(0,"div",94),C(1,Ae,8,0,"div",95,M),n()),l&2&&(a(),w(B(0,ue)))}var de=class l{constructor(e,t,o){this.fb=e;this.authService=t;this.router=o;this.authService.session$.subscribe(s=>{s||this.router.navigate(["/login"])}),this.subscriptionForm=this.fb.group({name:["",x.required],emoji:["\u{1F4B3}"],plan_details:[""],billing_amount:[0,[x.required,x.min(1)]],billing_date:[1,[x.required,x.min(1),x.max(31)]],billing_cycle:["monthly",x.required],start_date:[this.getTodayDate(),x.required],end_date:[""],is_active:[!0],is_mobile_recharge:[!1],notes:[""]}),this.subscriptionForm.get("is_mobile_recharge")?.valueChanges.subscribe(s=>{let d=this.subscriptionForm.get("billing_date"),u=this.subscriptionForm.get("billing_cycle"),T=this.subscriptionForm.get("start_date");s?(d?.clearValidators(),u?.clearValidators(),T?.clearValidators()):(d?.setValidators([x.required,x.min(1),x.max(31)]),u?.setValidators([x.required]),T?.setValidators([x.required])),d?.updateValueAndValidity(),u?.updateValueAndValidity(),T?.updateValueAndValidity()})}showAddSubscription=h(!1);subscriptionForm;selectedSubscriptionId=h(null);editingSubscriptionId=h(null);subscriptions=h([]);isLoading=h(!0);userId=h(null);supabaseService=E(q);subscriptionsService=E(z);appDataStore=E(G);billingCycles=["monthly","quarterly","yearly"];popularEmojis=["\u{1F4B3}","\u{1F4F1}","\u{1F4FA}","\u{1F3AE}","\u{1F3B5}","\u2601\uFE0F","\u{1F310}","\u{1F4E1}"];activeSubscriptions=k(()=>this.subscriptions().filter(e=>e.is_active!==!1));totalMonthlyAmount=k(()=>this.subscriptionsService.calculateMonthlyTotal(this.activeSubscriptions()));upcomingSubscriptions=k(()=>this.subscriptionsService.getUpcomingSubscriptions(this.activeSubscriptions()));async ngOnInit(){try{let e=await this.supabaseService.getCurrentUser();e&&(this.userId.set(e.id),await this.loadSubscriptions(e.id))}catch(e){console.error("Failed to get user:",e);let t=this.getOrCreateDemoUserId();this.userId.set(t),await this.loadSubscriptions(t)}}getOrCreateDemoUserId(){let e="demo-user-id",t=localStorage.getItem(e);return t||(t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(o){let s=Math.random()*16|0;return(o==="x"?s:s&3|8).toString(16)}),localStorage.setItem(e,t)),t}async loadSubscriptions(e){this.isLoading.set(!0);try{if(this.appDataStore.subscriptionsLoaded()&&this.appDataStore.currentUserId()===e){let t=this.appDataStore.subscriptions();this.subscriptions.set(t),console.log("Using cached subscriptions data")}else{await this.appDataStore.loadSubscriptions(e);let t=this.appDataStore.subscriptions();this.subscriptions.set(t)}}catch(t){console.error("Error loading subscriptions:",t)}finally{this.isLoading.set(!1)}}openAddSubscription(){this.resetForm(),this.showAddSubscription.set(!0)}closeAddSubscription(){this.showAddSubscription.set(!1),this.selectedSubscriptionId.set(null),this.editingSubscriptionId()||this.resetForm()}toggleSubscriptionSelection(e){this.selectedSubscriptionId()===e?this.selectedSubscriptionId.set(null):this.selectedSubscriptionId.set(e)}onEmojiSelected(e){this.subscriptionForm.patchValue({emoji:e})}onAmountChange(e){let o=e.target.value.replace(/[^\d]/g,"");if(o===""){e.target.value="",this.subscriptionForm.get("billing_amount")?.setValue("",{emitEvent:!1});return}let s=parseInt(o,10);if(!isNaN(s)){let d=s.toLocaleString("en-IN");e.target.value=d,this.subscriptionForm.get("billing_amount")?.setValue(d,{emitEvent:!1})}}async submitSubscription(){if(this.subscriptionForm.invalid)return;let e=this.subscriptionForm.value,t=typeof e.billing_amount=="string"?parseInt(String(e.billing_amount).replace(/,/g,""),10)||0:e.billing_amount,o=this.userId();if(!o){console.error("User not authenticated");return}let s=this.editingSubscriptionId();try{let d={user_id:o,name:e.name,emoji:e.emoji,plan_details:e.plan_details,billing_amount:t,billing_date:parseInt(e.billing_date,10),billing_cycle:e.billing_cycle,start_date:e.start_date,end_date:e.end_date||void 0,is_active:e.is_active,is_mobile_recharge:e.is_mobile_recharge||!1,notes:e.notes};s?(await this.subscriptionsService.updateSubscription(s,d),this.editingSubscriptionId.set(null)):await this.subscriptionsService.createSubscription(d),o&&await this.loadSubscriptions(o),this.closeAddSubscription(),this.resetForm()}catch(d){console.error("Error saving subscription:",d)}}editSubscription(e){this.editingSubscriptionId.set(e.id||null),this.subscriptionForm.patchValue({name:e.name,emoji:e.emoji,plan_details:e.plan_details,billing_amount:e.billing_amount,billing_date:e.billing_date,billing_cycle:e.billing_cycle,start_date:e.start_date,end_date:e.end_date,is_active:e.is_active,is_mobile_recharge:e.is_mobile_recharge||!1,notes:e.notes}),this.showAddSubscription.set(!0),this.selectedSubscriptionId.set(null)}async deleteSubscription(e){if(confirm("Are you sure you want to delete this subscription?"))try{let t=this.userId();await this.subscriptionsService.deleteSubscription(e),t&&await this.loadSubscriptions(t),this.selectedSubscriptionId.set(null)}catch(t){console.error("Error deleting subscription:",t)}}calculateDaysLeft(e){return this.subscriptionsService.calculateDaysLeft(e)}formatIndianRupee(e){return e.toLocaleString("en-IN",{minimumFractionDigits:0,maximumFractionDigits:0})}getDaysLeftText(e){return e===0?"Today":e===1?"Tomorrow":`${e} days`}getBillingCycleText(e){return e.charAt(0).toUpperCase()+e.slice(1)}resetForm(){this.subscriptionForm.reset({name:"",emoji:"\u{1F4B3}",plan_details:"",billing_amount:0,billing_date:1,billing_cycle:"monthly",start_date:this.getTodayDate(),end_date:"",is_active:!0,is_mobile_recharge:!1,notes:""}),this.editingSubscriptionId.set(null)}getTodayDate(){return new Date().toISOString().split("T")[0]}getNextBillingDate(e){let t=new Date,o=t.getDate(),s=t.getMonth(),d=t.getFullYear(),u;return o<=e?u=new Date(d,s,e):u=new Date(d,s+1,e),u.toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})}isExpiringSoon(e){if(!e)return!1;let t=new Date,s=new Date(e).getTime()-t.getTime(),d=Math.ceil(s/(1e3*60*60*24));return d>=0&&d<=30}isMobileRecharge(e){return e.is_mobile_recharge||!1}static \u0275fac=function(t){return new(t||l)(I(ae),I(Y),I($))};static \u0275cmp=j({type:l,selectors:[["app-subscriptions"]],decls:131,vars:19,consts:[["skeletonLoader",""],[1,"w-full","h-full","flex","flex-col","2xl:px-8","md:px-5"],[1,"w-full","2xl:h-[15%]","flex","place-items-center","justify-between"],[1,"font-medium","2xl:text-[25px]","text-[22px]"],[1,"p-3","justify-center","place-items-center"],[1,"bx","bx-plus","rounded-[10px]","bg-[#08B783]","p-3","2xl:text-[20px]","text-[16px]","font-bold",2,"color","#ffffff",3,"click"],[1,"w-full","h-[85%]","flex","pb-5","2xl:gap-5","gap-2","flex-col","md:flex-row"],[1,"md:w-[60%]","h-full","flex","flex-col","2xl:gap-5","gap-2"],[1,"w-full","rounded-[10px]","bg-[#F7FCFC]","h-full","flex","flex-col"],[1,"w-full","h-[15%]","flex","place-items-center","justify-between","p-5","border-b","border-b-gray-200"],[1,"flex","flex-col","gap-1"],[1,"font-medium","2xl:text-[20px]","text-[16px]"],[1,"text-[10px]","text-gray-500","font-medium"],[1,"flex","flex-col","gap-2","text-center","items-center","justify-center","px-4"],[1,"2xl:text-[18px]","text-[14px]","font-semibold","text-[#FC3134]"],[1,"text-[10px]","text-gray-500","font-medium","whitespace-nowrap"],[1,"w-full","h-[85%]","flex","flex-col","overflow-y-auto"],[1,"w-full","flex","place-items-center","h-full","justify-center","text-gray-400"],[1,"md:w-[40%]","h-full","flex","flex-col","2xl:gap-5","gap-2"],[1,"w-full","rounded-[10px]","bg-[#F7FCFC]","h-[50%]","flex","flex-col"],[1,"w-full","h-[20%]","flex","place-items-center","justify-between","p-5","border-b","border-b-gray-200"],[1,"font-medium","2xl:text-[18px]","text-[16px]"],[1,"w-full","h-[80%]","flex","flex-col","overflow-y-auto"],[1,"w-full","flex","place-items-center","h-full","justify-center","text-gray-400","text-sm"],[1,"w-full","rounded-[10px]","bg-[#F7FCFC]","h-[50%]","flex","flex-col","2xl:p-5","p-3"],[1,"font-medium","2xl:text-[18px]","text-[14px]","2xl:mb-4","mb-2"],[1,"flex","flex-col","2xl:gap-3","gap-2","overflow-y-auto"],[1,"flex","justify-between","place-items-center","2xl:p-3","p-2","bg-white","rounded-lg"],[1,"2xl:text-[12px]","text-[10px]","text-gray-500","font-medium"],[1,"font-semibold","2xl:text-[22px]","text-[18px]"],[1,"2xl:p-3","p-2","bg-blue-100","rounded-full"],[1,"bx","bx-list-ul","2xl:text-[20px]","text-[16px]",2,"color","#3b82f6"],[1,"font-semibold","2xl:text-[22px]","text-[18px]","text-[#FC3134]"],[1,"2xl:p-3","p-2","bg-red-100","rounded-full"],[1,"bx","bx-wallet","2xl:text-[20px]","text-[16px]",2,"color","#ef4444"],[1,"font-semibold","2xl:text-[18px]","text-[16px]","text-gray-700"],[1,"2xl:p-3","p-2","bg-gray-200","rounded-full"],[1,"bx","bx-calendar","2xl:text-[20px]","text-[16px]",2,"color","#6b7280"],[1,"font-semibold","2xl:text-[18px]","text-[16px]","text-orange-500"],[1,"2xl:p-3","p-2","bg-orange-100","rounded-full"],[1,"bx","bx-bell","2xl:text-[20px]","text-[16px]",2,"color","#f97316"],[1,"fixed","top-0","right-0","z-50","h-full","2xl:max-w-md","w-sm","bg-white","transform","transition-transform","duration-300","ease-in-out","flex","flex-col","translate-x-full"],[1,"flex","items-center","justify-between","p-4","border-b"],[1,"2xl:text-lg","font-semibold"],[1,"text-2xl","text-gray-500",3,"click"],[1,"flex","flex-col","2xl:gap-4","gap-2","p-4","overflow-y-auto","flex-1","2xl:text-[15px]","text-[12px]",3,"ngSubmit","formGroup"],[1,"flex","gap-3"],[1,"flex-1"],[1,"text-sm","font-medium"],[1,"text-red-500"],["formControlName","name","placeholder","e.g., Netflix, Airtel, Jio",1,"mt-1","w-full","rounded-lg","border","px-3","py-2","outline-none"],[1,"text-red-500","text-xs","mt-1"],[1,"w-20"],[3,"emojiSelected"],["formControlName","plan_details","placeholder","e.g., Premium Plan, Unlimited",1,"mt-1","w-full","rounded-lg","border","px-3","py-2","outline-none"],[1,"relative"],[1,"absolute","left-3","top-3","text-gray-500"],["type","text","formControlName","billing_amount","placeholder","0",1,"mt-1","w-full","rounded-lg","border","px-10","py-2","outline-none",3,"input"],[1,"flex","items-center","gap-3","pt-2"],["type","checkbox","formControlName","is_mobile_recharge","id","is_mobile_recharge",1,"w-4","h-4","cursor-pointer"],["for","is_mobile_recharge",1,"text-sm","font-medium","cursor-pointer"],["type","date","formControlName","end_date",1,"mt-1","w-full","rounded-lg","border","px-3","py-2","outline-none"],[1,"text-xs","text-gray-500","mt-1"],["type","checkbox","formControlName","is_active","id","is_active",1,"w-4","h-4","cursor-pointer"],["for","is_active",1,"text-sm","font-medium","cursor-pointer"],["formControlName","notes","rows","3","placeholder","Add any additional notes...",1,"mt-1","w-full","rounded-lg","border","px-3","py-2","outline-none"],[1,"flex","gap-3","pt-4","border-t"],["type","button",1,"flex-1","bg-gray-200","text-gray-700","py-3","rounded-lg","font-medium","hover:bg-gray-300","transition-colors",3,"click"],["type","submit",1,"flex-1","bg-[#08B783]","text-white","py-3","rounded-lg","font-medium","hover:bg-[#06a071]","transition-colors","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],[4,"ngTemplateOutlet"],[1,"w-full","relative","px-5","2xl:py-4","py-2","cursor-pointer","border-b","border-b-gray-100"],[1,"w-full","relative","px-5","2xl:py-4","py-2","cursor-pointer","border-b","border-b-gray-100",3,"click"],[1,"w-full","flex","place-items-start","justify-between"],[1,"flex","gap-5","place-items-center","flex-1"],[1,"p-3","2xl:text-[24px]","text-[20px]","bg-gray-200","rounded-full"],[1,"font-medium","2xl:text-[18px]","text-[14px]"],[1,"text-[10px]","text-yellow-600","font-medium"],[1,"flex","flex-col","gap-1","items-end"],[1,"font-semibold","2xl:text-[18px]","text-[14px]","text-[#FC3134]"],[1,"text-[11px]","font-medium","text-blue-600"],[1,"text-[10px]","text-orange-500","font-semibold"],[1,"absolute","inset-0","flex","items-center","justify-center","gap-4"],[1,"text-[11px]","font-medium"],[1,"bx","bx-edit-alt","bx-lg",2,"color","#0f1f3c","font-size","28px","cursor","pointer",3,"click"],[1,"bx","bx-trash-alt","bx-lg",2,"color","#0f1f3c","font-size","28px","cursor","pointer",3,"click"],[1,"w-full","px-5","2xl:py-3","py-2","border-b","border-b-gray-100"],[1,"flex","gap-3","place-items-center","flex-1"],[1,"p-2","2xl:text-[20px]","text-[18px]","bg-gray-200","rounded-full"],[1,"font-medium","2xl:text-[16px]","text-[13px]"],[1,"font-semibold","2xl:text-[16px]","text-[13px]","text-[#FC3134]"],["type","number","formControlName","billing_date","placeholder","Day of month (1-31)","min","1","max","31",1,"mt-1","w-full","rounded-lg","border","px-3","py-2","outline-none"],["formControlName","billing_cycle",1,"mt-1","w-full","rounded-lg","border","px-3","py-2","outline-none","text-gray-900"],[3,"value"],["type","date","formControlName","start_date",1,"mt-1","w-full","rounded-lg","border","px-3","py-2","outline-none"],[1,"w-full","flex","flex-col"],[1,"skeleton-item","flex","gap-5"],[1,"skeleton","skeleton-avatar"],[1,"skeleton","skeleton-title"],[1,"skeleton","skeleton-subtitle"],[1,"flex","flex-col","items-end","gap-2"],[1,"skeleton","skeleton-amount"],[1,"skeleton","skeleton-text"]],template:function(t,o){if(t&1){let s=F();i(0,"div",1)(1,"div",2)(2,"div",3),r(3,"Subscriptions"),n(),i(4,"div",4)(5,"i",5),S("click",function(){return _(s),f(o.openAddSubscription())}),n()()(),i(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9)(10,"div",10)(11,"div",11),r(12,"Active Subscriptions"),n(),i(13,"div",12),r(14),n()(),i(15,"div",13)(16,"div",14),r(17),n(),i(18,"div",15),r(19,"Monthly Total"),n()()(),i(20,"div",16),b(21,me,1,1,"ng-container")(22,xe,2,0,"div",17)(23,Ce,2,0),n()()(),i(24,"div",18)(25,"div",19)(26,"div",20)(27,"div",10)(28,"div",21),r(29,"Upcoming Billing"),n(),i(30,"div",12),r(31,"Next 7 days"),n()()(),i(32,"div",22),b(33,Ee,1,1,"ng-container")(34,Ie,2,0,"div",23)(35,Fe,2,0),n()(),i(36,"div",24)(37,"div",25),r(38,"Summary"),n(),i(39,"div",26)(40,"div",27)(41,"div",10)(42,"div",28),r(43,"Total Active"),n(),i(44,"div",29),r(45),n()(),i(46,"div",30),p(47,"i",31),n()(),i(48,"div",27)(49,"div",10)(50,"div",28),r(51,"Monthly Cost"),n(),i(52,"div",32),r(53),n()(),i(54,"div",33),p(55,"i",34),n()(),i(56,"div",27)(57,"div",10)(58,"div",28),r(59,"Yearly Cost"),n(),i(60,"div",35),r(61),n()(),i(62,"div",36),p(63,"i",37),n()(),i(64,"div",27)(65,"div",10)(66,"div",28),r(67,"Upcoming (7 days)"),n(),i(68,"div",38),r(69),n()(),i(70,"div",39),p(71,"i",40),n()()()()()(),i(72,"div",41)(73,"div",42)(74,"h2",43),r(75),n(),i(76,"button",44),S("click",function(){return _(s),f(o.closeAddSubscription())}),r(77,"\u2715"),n()(),i(78,"form",45),S("ngSubmit",function(){return _(s),f(o.submitSubscription())}),i(79,"div",46)(80,"div",47)(81,"label",48),r(82,"Subscription Name "),i(83,"span",49),r(84,"*"),n()(),p(85,"input",50),b(86,ke,2,0,"p",51),n(),i(87,"div",52)(88,"label",48),r(89,"Emoji"),n(),i(90,"app-emoji-picker",53),S("emojiSelected",function(u){return _(s),f(o.onEmojiSelected(u))}),n()()(),i(91,"div")(92,"label",48),r(93,"Plan Details"),n(),p(94,"input",54),n(),i(95,"div")(96,"label",48),r(97,"Billing Amount "),i(98,"span",49),r(99,"*"),n()(),i(100,"div",55)(101,"span",56),r(102,"\u20B9"),n(),i(103,"input",57),S("input",function(u){return _(s),f(o.onAmountChange(u))}),n()(),b(104,Te,2,0,"p",51),n(),i(105,"div",58),p(106,"input",59),i(107,"label",60),r(108," Mobile Recharge? "),n()(),b(109,Ne,21,1),i(110,"div")(111,"label",48),r(112,"End Date (Optional)"),n(),p(113,"input",61),i(114,"p",62),r(115,"Leave empty for ongoing subscriptions"),n()(),i(116,"div",58),p(117,"input",63),i(118,"label",64),r(119," Active Subscription "),n()(),i(120,"div")(121,"label",48),r(122,"Notes (Optional)"),n(),p(123,"textarea",65),n(),i(124,"div",66)(125,"button",67),S("click",function(){return _(s),f(o.closeAddSubscription())}),r(126," Cancel "),n(),i(127,"button",68),r(128),n()()()()(),D(129,Oe,3,1,"ng-template",null,0,L)}if(t&2){let s,d,u;a(14),m("",o.activeSubscriptions().length," active subscriptions "),a(3),m(" Rs. ",o.formatIndianRupee(o.totalMonthlyAmount())," "),a(4),g(o.isLoading()?21:o.activeSubscriptions().length===0?22:23),a(12),g(o.isLoading()?33:o.upcomingSubscriptions().length===0?34:35),a(12),v(o.activeSubscriptions().length),a(8),m(" Rs. ",o.formatIndianRupee(o.totalMonthlyAmount())," "),a(8),m(" Rs. ",o.formatIndianRupee(o.totalMonthlyAmount()*12)," "),a(8),m(" ",o.upcomingSubscriptions().length," "),a(3),A("translate-x-0",o.showAddSubscription())("translate-x-full",!o.showAddSubscription()),a(3),m(" ",o.editingSubscriptionId()?"Edit Subscription":"Add Subscription"," "),a(3),y("formGroup",o.subscriptionForm),a(8),g((s=o.subscriptionForm.get("name"))!=null&&s.invalid&&((s=o.subscriptionForm.get("name"))!=null&&s.touched)?86:-1),a(18),g((d=o.subscriptionForm.get("billing_amount"))!=null&&d.invalid&&((d=o.subscriptionForm.get("billing_amount"))!=null&&d.touched)?104:-1),a(5),g((u=o.subscriptionForm.get("is_mobile_recharge"))!=null&&u.value?-1:109),a(18),y("disabled",o.subscriptionForm.invalid),a(),m(" ",o.editingSubscriptionId()?"Update":"Add"," Subscription ")}},dependencies:[se,X,ne,oe,K,Z,J,ie,Q,W,re,le,te,ee,U,R,H],styles:["form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{border:1px solid lightgray}form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%] > option[_ngcontent-%COMP%]{color:#000}.skeleton[_ngcontent-%COMP%]{background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0,#f0f0f0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_loading 1.5s infinite}@keyframes _ngcontent-%COMP%_loading{0%{background-position:200% 0}to{background-position:-200% 0}}.skeleton-item[_ngcontent-%COMP%]{padding:16px 20px;border-bottom:1px solid #e5e5e5}.skeleton-avatar[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%}.skeleton-title[_ngcontent-%COMP%]{height:16px;margin-bottom:8px;border-radius:4px}.skeleton-subtitle[_ngcontent-%COMP%]{height:12px;width:60%;border-radius:4px}.skeleton-amount[_ngcontent-%COMP%]{height:20px;width:80px;border-radius:4px;margin-bottom:8px}.skeleton-text[_ngcontent-%COMP%]{height:12px;width:70px;border-radius:4px}.w-full.relative.px-5[_ngcontent-%COMP%]:hover{background-color:#00000005;transition:background-color .2s ease}.translate-x-0[_ngcontent-%COMP%]{box-shadow:-4px 0 6px -1px #0000001a}.overflow-y-auto[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.overflow-y-auto[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:10px}.overflow-y-auto[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:10px}.overflow-y-auto[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}"],changeDetection:0})};export{de as Subscriptions};
